{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction UserDashboardComponent_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.currentBorrows.length);\n  }\n}\nfunction UserDashboardComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.unreadNotifications);\n  }\n}\nfunction UserDashboardComponent_span_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.faqs.length);\n  }\n}\nfunction UserDashboardComponent_div_50_div_17_div_1_div_8_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 65);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_50_div_17_div_1_div_8_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const book_r4 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r0.requestBorrow(book_r4.id));\n    });\n    i0.ɵɵelement(1, \"i\", 66);\n    i0.ɵɵtext(2, \"Demander \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_50_div_17_div_1_div_8_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 67);\n    i0.ɵɵelement(1, \"i\", 68);\n    i0.ɵɵtext(2, \"Indisponible \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_50_div_17_div_1_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"div\", 50)(2, \"div\", 51)(3, \"img\", 52);\n    i0.ɵɵlistener(\"error\", function UserDashboardComponent_div_50_div_17_div_1_div_8_Template_img_error_3_listener($event) {\n      const book_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r0.onBookImageError($event, book_r4));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 53)(5, \"div\", 54)(6, \"span\", 55);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 56)(9, \"h6\", 57);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 58);\n    i0.ɵɵelement(12, \"i\", 59);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_50_div_17_div_1_div_8_Template_button_click_14_listener() {\n      const book_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r0.showDescription(book_r4));\n    });\n    i0.ɵɵelement(15, \"i\", 61);\n    i0.ɵɵtext(16, \"Voir description \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 62);\n    i0.ɵɵtemplate(18, UserDashboardComponent_div_50_div_17_div_1_div_8_button_18_Template, 3, 0, \"button\", 63)(19, UserDashboardComponent_div_50_div_17_div_1_div_8_button_19_Template, 3, 0, \"button\", 64);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r4 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", book_r4.cover_url, i0.ɵɵsanitizeUrl)(\"alt\", book_r4.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"background\", ctx_r0.getGenreColor(book_r4.genre));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(book_r4.genre);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(book_r4.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(book_r4.author);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", book_r4.available > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", book_r4.available === 0);\n  }\n}\nfunction UserDashboardComponent_div_50_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"div\", 44)(2, \"h4\", 45);\n    i0.ɵɵelement(3, \"i\", 46);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 47);\n    i0.ɵɵtemplate(8, UserDashboardComponent_div_50_div_17_div_1_div_8_Template, 20, 9, \"div\", 48);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const category_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(category_r6.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", category_r6.description, \" (\", category_r6.books.length, \" livres)\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", category_r6.books);\n  }\n}\nfunction UserDashboardComponent_div_50_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, UserDashboardComponent_div_50_div_17_div_1_Template, 9, 4, \"div\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categoriesWithBooks);\n  }\n}\nfunction UserDashboardComponent_div_50_div_18_div_2_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 65);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_50_div_18_div_2_button_18_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const book_r8 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.requestBorrow(book_r8.id));\n    });\n    i0.ɵɵelement(1, \"i\", 66);\n    i0.ɵɵtext(2, \"Demander \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_50_div_18_div_2_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 67);\n    i0.ɵɵelement(1, \"i\", 68);\n    i0.ɵɵtext(2, \"Indisponible \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_50_div_18_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 49)(1, \"div\", 50)(2, \"div\", 51)(3, \"img\", 52);\n    i0.ɵɵlistener(\"error\", function UserDashboardComponent_div_50_div_18_div_2_Template_img_error_3_listener($event) {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.onBookImageError($event, book_r8));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 53)(5, \"div\", 54)(6, \"span\", 55);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 56)(9, \"h6\", 57);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 58);\n    i0.ɵɵelement(12, \"i\", 59);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 60);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_50_div_18_div_2_Template_button_click_14_listener() {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.showDescription(book_r8));\n    });\n    i0.ɵɵelement(15, \"i\", 61);\n    i0.ɵɵtext(16, \"Voir description \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 62);\n    i0.ɵɵtemplate(18, UserDashboardComponent_div_50_div_18_div_2_button_18_Template, 3, 0, \"button\", 63)(19, UserDashboardComponent_div_50_div_18_div_2_button_19_Template, 3, 0, \"button\", 64);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r8 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", book_r8.cover_url, i0.ɵɵsanitizeUrl)(\"alt\", book_r8.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"background\", ctx_r0.getGenreColor(book_r8.genre));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(book_r8.genre);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(book_r8.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(book_r8.author);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", book_r8.available > 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", book_r8.available === 0);\n  }\n}\nfunction UserDashboardComponent_div_50_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 47);\n    i0.ɵɵtemplate(2, UserDashboardComponent_div_50_div_18_div_2_Template, 20, 9, \"div\", 48);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.books);\n  }\n}\nfunction UserDashboardComponent_div_50_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 69);\n    i0.ɵɵelement(1, \"i\", 70);\n    i0.ɵɵelementStart(2, \"p\", 31);\n    i0.ɵɵtext(3, \"Aucun livre trouv\\u00E9\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserDashboardComponent_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵelement(3, \"i\", 8);\n    i0.ɵɵtext(4, \" Catalogue des livres\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6, \"Recherchez et d\\u00E9couvrez nos livres disponibles\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 32)(8, \"div\", 33)(9, \"div\", 34)(10, \"input\", 35);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UserDashboardComponent_div_50_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.searchTerm, $event) || (ctx_r0.searchTerm = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"keyup.enter\", function UserDashboardComponent_div_50_Template_input_keyup_enter_10_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.searchBooks());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_50_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.searchBooks());\n    });\n    i0.ɵɵelement(12, \"i\", 8);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 37)(14, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_50_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.showByCategory = !ctx_r0.showByCategory);\n    });\n    i0.ɵɵelement(15, \"i\", 39);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(17, UserDashboardComponent_div_50_div_17_Template, 2, 1, \"div\", 40)(18, UserDashboardComponent_div_50_div_18_Template, 3, 1, \"div\", 40)(19, UserDashboardComponent_div_50_div_19_Template, 4, 0, \"div\", 41);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.searchTerm);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.showByCategory ? \"Vue Liste\" : \"Vue Cat\\u00E9gories\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showByCategory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.showByCategory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.books.length === 0 && !ctx_r0.showByCategory);\n  }\n}\nfunction UserDashboardComponent_div_51_button_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 81);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_51_button_31_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      ctx_r0.requestBorrow(ctx_r0.selectedBook.id);\n      return i0.ɵɵresetView(ctx_r0.closeDescription());\n    });\n    i0.ɵɵelement(1, \"i\", 82);\n    i0.ɵɵtext(2, \"Demander l'emprunt \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 71)(1, \"div\", 72)(2, \"div\", 73)(3, \"div\", 74)(4, \"h5\", 75);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 76);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_51_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.closeDescription());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 77)(8, \"div\", 47)(9, \"div\", 33)(10, \"h6\", 45);\n    i0.ɵɵtext(11, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 37)(15, \"h6\", 45);\n    i0.ɵɵtext(16, \"Informations\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\")(18, \"strong\");\n    i0.ɵɵtext(19, \"Auteur:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\")(22, \"strong\");\n    i0.ɵɵtext(23, \"Genre:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"span\", 55);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"p\")(27, \"strong\");\n    i0.ɵɵtext(28, \"Disponibilit\\u00E9:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(30, \"div\", 78);\n    i0.ɵɵtemplate(31, UserDashboardComponent_div_51_button_31_Template, 3, 0, \"button\", 79);\n    i0.ɵɵelementStart(32, \"button\", 80);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_51_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.closeDescription());\n    });\n    i0.ɵɵtext(33, \"Fermer\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"display\", ctx_r0.selectedBook ? \"block\" : \"none\");\n    i0.ɵɵclassProp(\"show\", ctx_r0.selectedBook);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.selectedBook.title);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r0.selectedBook.description);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.selectedBook.author, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵstyleProp(\"background\", ctx_r0.getGenreColor(ctx_r0.selectedBook.genre));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.selectedBook.genre);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r0.selectedBook.available, \"/\", ctx_r0.selectedBook.stock, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selectedBook.available > 0);\n  }\n}\nfunction UserDashboardComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 83);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_52_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.closeDescription());\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"show\", ctx_r0.selectedBook);\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_2_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const borrow_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Demand\\u00E9 le: \", i0.ɵɵpipeBind1(2, 1, borrow_r14.date_emprunt), \"\");\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_2_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const borrow_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"Emprunt\\u00E9: \", i0.ɵɵpipeBind1(2, 1, borrow_r14.date_emprunt), \"\");\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_2_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 93);\n    i0.ɵɵelement(1, \"i\", 97);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const borrow_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(borrow_r14.status === \"overdue\" ? \"text-danger\" : \"text-success\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Retour pr\\u00E9vu: \", i0.ɵɵpipeBind1(4, 3, borrow_r14.date_retour_prevue), \"\");\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_2_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 93);\n    i0.ɵɵelement(1, \"i\", 98);\n    i0.ɵɵelementStart(2, \"span\", 99);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const borrow_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Motif: \", borrow_r14.rejection_reason, \"\");\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_2_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 100)(1, \"small\", 31);\n    i0.ɵɵelement(2, \"i\", 101);\n    i0.ɵɵtext(3, \" Votre demande est en cours de traitement par l'administrateur. \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 88)(1, \"div\", 89)(2, \"div\", 56)(3, \"div\", 90)(4, \"h6\", 91);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 55);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"p\", 58);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 92)(11, \"div\", 93);\n    i0.ɵɵelement(12, \"i\", 94);\n    i0.ɵɵtemplate(13, UserDashboardComponent_div_53_div_12_div_2_span_13_Template, 3, 3, \"span\", 40)(14, UserDashboardComponent_div_53_div_12_div_2_span_14_Template, 3, 3, \"span\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, UserDashboardComponent_div_53_div_12_div_2_div_15_Template, 5, 5, \"div\", 95)(16, UserDashboardComponent_div_53_div_12_div_2_div_16_Template, 4, 1, \"div\", 95);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, UserDashboardComponent_div_53_div_12_div_2_div_17_Template, 4, 0, \"div\", 96);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const borrow_r14 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(borrow_r14.title);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r0.getBorrowStatusClass(borrow_r14.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.getStatusLabel(borrow_r14.status));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r14.author);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", borrow_r14.status === \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", borrow_r14.status !== \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", borrow_r14.date_retour_prevue);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", borrow_r14.status === \"rejected\" && borrow_r14.rejection_reason);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", borrow_r14.status === \"pending\");\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 102);\n    i0.ɵɵelement(1, \"i\", 103);\n    i0.ɵɵelementStart(2, \"h5\", 31);\n    i0.ɵɵtext(3, \"Aucune demande en attente\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 31);\n    i0.ɵɵtext(5, \"Explorez notre catalogue pour faire une demande d'emprunt\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 104);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_53_div_12_div_3_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.setActiveTab(\"catalog\"));\n    });\n    i0.ɵɵelement(7, \"i\", 8);\n    i0.ɵɵtext(8, \" Parcourir le catalogue \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserDashboardComponent_div_53_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 47);\n    i0.ɵɵtemplate(2, UserDashboardComponent_div_53_div_12_div_2_Template, 18, 10, \"div\", 86);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, UserDashboardComponent_div_53_div_12_div_3_Template, 9, 0, \"div\", 87);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.currentBorrows);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.currentBorrows.length === 0);\n  }\n}\nfunction UserDashboardComponent_div_53_div_13_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"span\", 55);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"button\", 108);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_53_div_13_tr_18_Template_button_click_15_listener() {\n      const borrow_r17 = i0.ɵɵrestoreView(_r16).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.downloadReceipt(borrow_r17.id));\n    });\n    i0.ɵɵelement(16, \"i\", 109);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const borrow_r17 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r17.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r17.author);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 7, borrow_r17.date_emprunt));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 9, borrow_r17.date_retour_effective));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.getBorrowStatusClass(borrow_r17.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.getStatusLabel(borrow_r17.status));\n  }\n}\nfunction UserDashboardComponent_div_53_div_13_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 102);\n    i0.ɵɵelement(1, \"i\", 110);\n    i0.ɵɵelementStart(2, \"h5\", 31);\n    i0.ɵɵtext(3, \"Aucun historique\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 31);\n    i0.ɵɵtext(5, \"Vos emprunts pass\\u00E9s appara\\u00EEtront ici\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserDashboardComponent_div_53_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 105)(2, \"table\", 106)(3, \"thead\")(4, \"tr\")(5, \"th\");\n    i0.ɵɵtext(6, \"Livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Auteur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Date emprunt\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Date retour\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Statut\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, UserDashboardComponent_div_53_div_13_tr_18_Template, 17, 11, \"tr\", 107);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, UserDashboardComponent_div_53_div_13_div_19_Template, 6, 0, \"div\", 87);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.borrowHistory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.borrowHistory.length === 0);\n  }\n}\nfunction UserDashboardComponent_div_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵelement(3, \"i\", 9);\n    i0.ɵɵtext(4, \" Mon compte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6, \"G\\u00E9rez vos emprunts et votre historique\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 84)(8, \"button\", 85);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_53_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.borrowView = \"current\");\n    });\n    i0.ɵɵtext(9, \" Demandes en attente \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 85);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_53_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.borrowView = \"history\");\n    });\n    i0.ɵɵtext(11, \" Historique \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(12, UserDashboardComponent_div_53_div_12_Template, 4, 2, \"div\", 40)(13, UserDashboardComponent_div_53_div_13_Template, 20, 2, \"div\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵclassMap(ctx_r0.borrowView === \"current\" ? \"btn-primary\" : \"btn-outline-primary\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r0.borrowView === \"history\" ? \"btn-primary\" : \"btn-outline-primary\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.borrowView === \"current\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.borrowView === \"history\");\n  }\n}\nfunction UserDashboardComponent_div_54_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 122)(1, \"div\", 123);\n    i0.ɵɵelement(2, \"i\", 124);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r0.lastScanResult.success ? \"alert-success\" : \"alert-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(ctx_r0.lastScanResult.success ? \"fa-check-circle\" : \"fa-times-circle\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.lastScanResult.message, \" \");\n  }\n}\nfunction UserDashboardComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵelement(3, \"i\", 11);\n    i0.ɵɵtext(4, \" Kiosque Self-Service\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6, \"Empruntez et retournez vos livres en autonomie\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 111)(8, \"div\", 112)(9, \"div\", 113)(10, \"h5\");\n    i0.ɵɵelement(11, \"i\", 114);\n    i0.ɵɵtext(12, \" Session active\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"p\")(14, \"strong\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"p\", 31);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 115);\n    i0.ɵɵelement(19, \"i\", 116);\n    i0.ɵɵelementStart(20, \"p\");\n    i0.ɵɵtext(21, \"Code QR de session\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(22, \"div\", 117)(23, \"div\", 118)(24, \"div\", 119);\n    i0.ɵɵtext(25, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 120)(27, \"h6\");\n    i0.ɵɵtext(28, \"Posez votre carte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"p\");\n    i0.ɵɵtext(30, \"Placez votre carte RFID sur le lecteur\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"div\", 118)(32, \"div\", 119);\n    i0.ɵɵtext(33, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\", 120)(35, \"h6\");\n    i0.ɵɵtext(36, \"Scannez le livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"p\");\n    i0.ɵɵtext(38, \"Posez le livre sur le lecteur RFID\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(39, \"div\", 118)(40, \"div\", 119);\n    i0.ɵɵtext(41, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\", 120)(43, \"h6\");\n    i0.ɵɵtext(44, \"Confirmation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"p\");\n    i0.ɵɵtext(46, \"L'op\\u00E9ration sera confirm\\u00E9e automatiquement\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(47, UserDashboardComponent_div_54_div_47_Template, 4, 5, \"div\", 121);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵtextInterpolate(ctx_r0.currentUser == null ? null : ctx_r0.currentUser.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"ID: \", ctx_r0.currentUser == null ? null : ctx_r0.currentUser.id, \"\");\n    i0.ɵɵadvance(30);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.lastScanResult);\n  }\n}\nfunction UserDashboardComponent_div_55_div_8_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 132);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_55_div_8_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const notification_r19 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.markAsRead(notification_r19.id));\n    });\n    i0.ɵɵelement(1, \"i\", 133);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction UserDashboardComponent_div_55_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 127)(1, \"div\", 128);\n    i0.ɵɵelement(2, \"i\", 124);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 129)(4, \"h6\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"small\", 31);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 130);\n    i0.ɵɵtemplate(12, UserDashboardComponent_div_55_div_8_button_12_Template, 2, 0, \"button\", 131);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const notification_r19 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"unread\", !notification_r19.is_read);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r0.getNotificationIcon(notification_r19.type));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(notification_r19.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(notification_r19.message);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(10, 8, notification_r19.created_at, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !notification_r19.is_read);\n  }\n}\nfunction UserDashboardComponent_div_55_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 102);\n    i0.ɵɵelement(1, \"i\", 134);\n    i0.ɵɵelementStart(2, \"h5\", 31);\n    i0.ɵɵtext(3, \"Aucune notification\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 31);\n    i0.ɵɵtext(5, \"Vous serez notifi\\u00E9 des \\u00E9v\\u00E9nements importants ici\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction UserDashboardComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵelement(3, \"i\", 12);\n    i0.ɵɵtext(4, \" Notifications\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6, \"Vos messages et alertes\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 125);\n    i0.ɵɵtemplate(8, UserDashboardComponent_div_55_div_8_Template, 13, 11, \"div\", 126);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, UserDashboardComponent_div_55_div_9_Template, 6, 0, \"div\", 87);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.notifications);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.notifications.length === 0);\n  }\n}\nfunction UserDashboardComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵelement(3, \"i\", 9);\n    i0.ɵɵtext(4, \" Mon profil\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6, \"G\\u00E9rez vos informations personnelles\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 47)(8, \"div\", 33)(9, \"div\", 135)(10, \"div\", 136)(11, \"h5\");\n    i0.ɵɵtext(12, \"Informations personnelles\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 56)(14, \"form\")(15, \"div\", 47)(16, \"div\", 137)(17, \"div\", 138)(18, \"label\", 139);\n    i0.ɵɵtext(19, \"Nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"input\", 140);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UserDashboardComponent_div_56_Template_input_ngModelChange_20_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userProfile.name, $event) || (ctx_r0.userProfile.name = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\", 137)(22, \"div\", 138)(23, \"label\", 139);\n    i0.ɵɵtext(24, \"Pr\\u00E9nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"input\", 141);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UserDashboardComponent_div_56_Template_input_ngModelChange_25_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userProfile.surname, $event) || (ctx_r0.userProfile.surname = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(26, \"div\", 138)(27, \"label\", 139);\n    i0.ɵɵtext(28, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"input\", 142);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UserDashboardComponent_div_56_Template_input_ngModelChange_29_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userProfile.email, $event) || (ctx_r0.userProfile.email = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"div\", 138)(31, \"label\", 139);\n    i0.ɵɵtext(32, \"T\\u00E9l\\u00E9phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"input\", 143);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UserDashboardComponent_div_56_Template_input_ngModelChange_33_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userProfile.phone, $event) || (ctx_r0.userProfile.phone = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\", 138)(35, \"label\", 139);\n    i0.ɵɵtext(36, \"Nouveau mot de passe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"input\", 144);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function UserDashboardComponent_div_56_Template_input_ngModelChange_37_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newPassword, $event) || (ctx_r0.newPassword = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"button\", 145);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_56_Template_button_click_38_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.updateProfile());\n    });\n    i0.ɵɵelement(39, \"i\", 146);\n    i0.ɵɵtext(40, \" Sauvegarder \");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(41, \"div\", 37)(42, \"div\", 135)(43, \"div\", 136)(44, \"h5\");\n    i0.ɵɵtext(45, \"Carte biblioth\\u00E8que\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(46, \"div\", 147)(47, \"div\", 148);\n    i0.ɵɵelement(48, \"i\", 149);\n    i0.ɵɵelementStart(49, \"p\")(50, \"strong\");\n    i0.ɵɵtext(51, \"Tag UID:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(52, \"code\");\n    i0.ɵɵtext(53);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(54, \"button\", 150);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_56_Template_button_click_54_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.requestNewCard());\n    });\n    i0.ɵɵelement(55, \"i\", 151);\n    i0.ɵɵtext(56, \" Demander remplacement \");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(20);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userProfile.name);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userProfile.surname);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userProfile.email);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userProfile.phone);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newPassword);\n    i0.ɵɵadvance(16);\n    i0.ɵɵtextInterpolate(ctx_r0.userProfile.tag_uid || \"Non assign\\u00E9\");\n  }\n}\nfunction UserDashboardComponent_div_57_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 159)(1, \"div\", 160);\n    i0.ɵɵlistener(\"click\", function UserDashboardComponent_div_57_div_10_Template_div_click_1_listener() {\n      const i_r22 = i0.ɵɵrestoreView(_r21).index;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.toggleFAQ(i_r22));\n    });\n    i0.ɵɵelementStart(2, \"h6\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"i\", 124);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 161)(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const faq_r23 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(faq_r23.question);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(faq_r23.expanded ? \"fa-chevron-up\" : \"fa-chevron-down\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassProp(\"expanded\", faq_r23.expanded);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(faq_r23.answer);\n  }\n}\nfunction UserDashboardComponent_div_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"h3\");\n    i0.ɵɵelement(3, \"i\", 14);\n    i0.ɵɵtext(4, \" Aide & FAQ\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 31);\n    i0.ɵɵtext(6, \"Trouvez des r\\u00E9ponses \\u00E0 vos questions\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 47)(8, \"div\", 33)(9, \"div\", 152);\n    i0.ɵɵtemplate(10, UserDashboardComponent_div_57_div_10_Template, 8, 6, \"div\", 153);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 37)(12, \"div\", 135)(13, \"div\", 136)(14, \"h5\");\n    i0.ɵɵtext(15, \"Informations pratiques\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 56)(17, \"div\", 154);\n    i0.ɵɵelement(18, \"i\", 155);\n    i0.ɵɵelementStart(19, \"div\")(20, \"strong\");\n    i0.ɵɵtext(21, \"Horaires\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"p\", 156);\n    i0.ɵɵtext(23, \"Lun-Ven: 8h-18h\");\n    i0.ɵɵelement(24, \"br\");\n    i0.ɵɵtext(25, \"Sam: 9h-17h\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 154);\n    i0.ɵɵelement(27, \"i\", 157);\n    i0.ɵɵelementStart(28, \"div\")(29, \"strong\");\n    i0.ɵɵtext(30, \"Contact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"p\", 156);\n    i0.ɵɵtext(32, \"elibrary@gmail.com\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(33, \"div\", 154);\n    i0.ɵɵelement(34, \"i\", 158);\n    i0.ɵɵelementStart(35, \"div\")(36, \"strong\");\n    i0.ɵɵtext(37, \"T\\u00E9l\\u00E9phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"p\", 156);\n    i0.ɵɵtext(39, \"+226 61630303\");\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.faqs);\n  }\n}\nexport let UserDashboardComponent = /*#__PURE__*/(() => {\n  class UserDashboardComponent {\n    constructor(apiService, authService, router) {\n      this.apiService = apiService;\n      this.authService = authService;\n      this.router = router;\n      this.activeTab = 'catalog';\n      this.books = [];\n      this.categories = [];\n      this.categoriesWithBooks = [];\n      this.myBorrows = [];\n      this.currentBorrows = [];\n      this.borrowHistory = [];\n      this.notifications = [];\n      this.searchTerm = '';\n      this.selectedCategory = '';\n      this.showByCategory = true;\n      this.selectedBook = null;\n      this.unreadNotifications = 0;\n      this.currentUser = this.authService.getCurrentUser();\n      this.borrowView = 'current';\n      this.lastScanResult = null;\n      this.userProfile = {};\n      this.newPassword = '';\n      this.faqs = [];\n    }\n    ngOnInit() {\n      this.loadCategories();\n      this.createTestBooksIfNeeded();\n      this.loadBooks();\n      this.loadMyBorrows();\n      this.loadNotifications();\n      this.loadUserProfile();\n      this.loadFAQs();\n      // Écouter les changements d'utilisateur pour mettre à jour la photo et le statut\n      this.authService.currentUser$.subscribe(user => {\n        this.currentUser = user;\n      });\n      // Écouter les mises à jour de statut utilisateur\n      window.addEventListener('userStatusUpdated', event => {\n        this.currentUser = event.detail;\n      });\n      // Vérifier périodiquement les mises à jour de statut\n      setInterval(() => {\n        this.checkUserStatusUpdate();\n      }, 1000);\n    }\n    createTestBooksIfNeeded() {\n      const existingBooks = localStorage.getItem('adminBooks');\n      if (!existingBooks || JSON.parse(existingBooks).length === 0) {\n        const testBooks = [{\n          id: 1,\n          title: 'Le Petit Prince',\n          author: 'Antoine de Saint-Exupéry',\n          isbn: '9782070408504',\n          category_id: 1,\n          category: {\n            id: 1,\n            name: 'Fiction'\n          },\n          stock: 5,\n          available: 5,\n          description: 'Un conte poétique et philosophique sous l\\'apparence d\\'un conte pour enfants.',\n          cover_url: 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=300&h=400&fit=crop'\n        }, {\n          id: 2,\n          title: 'Dune',\n          author: 'Frank Herbert',\n          isbn: '9782266320580',\n          category_id: 2,\n          category: {\n            id: 2,\n            name: 'Science-Fiction'\n          },\n          stock: 3,\n          available: 3,\n          description: 'Une épopée de science-fiction dans un univers désertique lointain.',\n          cover_url: 'https://images.unsplash.com/photo-1589998059171-988d887df646?w=300&h=400&fit=crop'\n        }, {\n          id: 3,\n          title: 'Clean Code',\n          author: 'Robert C. Martin',\n          isbn: '9780132350884',\n          category_id: 5,\n          category: {\n            id: 5,\n            name: 'Informatique'\n          },\n          stock: 6,\n          available: 6,\n          description: 'Guide pour écrire du code propre et maintenable.',\n          cover_url: 'https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=300&h=400&fit=crop'\n        }, {\n          id: 4,\n          title: 'Harry Potter à l\\'\\u00e9cole des sorciers',\n          author: 'J.K. Rowling',\n          isbn: '9782070541270',\n          category_id: 9,\n          category: {\n            id: 9,\n            name: 'Jeunesse'\n          },\n          stock: 8,\n          available: 8,\n          description: 'Le premier tome de la saga du jeune sorcier.',\n          cover_url: 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=400&fit=crop'\n        }, {\n          id: 5,\n          title: 'Da Vinci Code',\n          author: 'Dan Brown',\n          isbn: '9782253121251',\n          category_id: 7,\n          category: {\n            id: 7,\n            name: 'Thriller'\n          },\n          stock: 5,\n          available: 5,\n          description: 'Un thriller captivant mêlant art, histoire et mystère.',\n          cover_url: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=400&fit=crop'\n        }];\n        localStorage.setItem('adminBooks', JSON.stringify(testBooks));\n        console.log('Livres de test créés:', testBooks);\n      }\n    }\n    setActiveTab(tab) {\n      this.activeTab = tab;\n      if (tab === 'my-account') {\n        this.loadMyBorrows();\n      } else if (tab === 'notifications') {\n        this.loadNotifications();\n      } else if (tab === 'profile') {\n        this.loadUserProfile();\n      }\n    }\n    loadBooks() {\n      // Charger d'abord depuis localStorage\n      const storedBooks = JSON.parse(localStorage.getItem('adminBooks') || '[]');\n      console.log('Livres depuis localStorage:', storedBooks);\n      if (storedBooks.length > 0) {\n        this.books = storedBooks.map(book => ({\n          ...book,\n          genre: book.category?.name || 'Fiction',\n          available: book.available || book.stock || 0,\n          stock: book.stock || 0,\n          cover_url: book.cover_url || this.getDefaultBookImage(book.category?.name || 'Fiction')\n        }));\n        console.log('Livres formatés:', this.books);\n        this.groupBooksByCategory();\n      }\n      // Essayer aussi de charger depuis l'API\n      this.apiService.getBooks().subscribe({\n        next: response => {\n          console.log('Réponse API books:', response);\n          const apiBooks = response.data || response || [];\n          if (apiBooks.length > 0) {\n            // Combiner avec les livres localStorage\n            const allBooks = [...apiBooks, ...storedBooks];\n            // Supprimer les doublons basés sur l'ISBN\n            const uniqueBooks = allBooks.filter((book, index, self) => index === self.findIndex(b => b.isbn === book.isbn));\n            this.books = uniqueBooks.map(book => ({\n              ...book,\n              genre: book.category?.name || 'Fiction',\n              available: book.available_quantity || book.available || book.stock || 0,\n              stock: book.quantity || book.stock || 0,\n              cover_url: book.cover_url || this.getDefaultBookImage(book.category?.name || 'Fiction')\n            }));\n            console.log('Livres combinés API + localStorage:', this.books);\n            this.groupBooksByCategory();\n          }\n        },\n        error: error => {\n          console.error('Erreur API (utilisation localStorage uniquement):', error);\n          // Les livres localStorage sont déjà chargés\n        }\n      });\n    }\n    getDefaultBookImage(genre) {\n      const images = {\n        'Fiction': 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=300&h=400&fit=crop',\n        'Science-Fiction': 'https://images.unsplash.com/photo-1589998059171-988d887df646?w=300&h=400&fit=crop',\n        'Histoire': 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=400&fit=crop',\n        'Philosophie': 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=400&fit=crop',\n        'Informatique': 'https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=300&h=400&fit=crop',\n        'Romance': 'https://images.unsplash.com/photo-1474552226712-ac0f0961a954?w=300&h=400&fit=crop',\n        'Thriller': 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=400&fit=crop'\n      };\n      return images[genre] || 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=300&h=400&fit=crop';\n    }\n    groupBooksByCategory() {\n      console.log('Groupement par catégories - Livres:', this.books);\n      console.log('Catégories disponibles:', this.categories);\n      this.categoriesWithBooks = this.categories.map(category => {\n        const categoryBooks = this.books.filter(book => book.category_id === category.id);\n        console.log(`Catégorie ${category.name} (ID: ${category.id}):`, categoryBooks);\n        return {\n          ...category,\n          books: categoryBooks\n        };\n      }).filter(category => category.books.length > 0);\n      console.log('Catégories avec livres:', this.categoriesWithBooks);\n    }\n    loadCategories() {\n      // Charger les catégories depuis localStorage ou créer des catégories par défaut\n      const storedCategories = localStorage.getItem('categories');\n      if (storedCategories) {\n        this.categories = JSON.parse(storedCategories);\n      } else {\n        // Créer des catégories par défaut\n        this.categories = [{\n          id: 1,\n          name: 'Fiction',\n          description: 'Romans et nouvelles'\n        }, {\n          id: 2,\n          name: 'Science-Fiction',\n          description: 'Science-fiction et fantasy'\n        }, {\n          id: 3,\n          name: 'Histoire',\n          description: 'Livres d\\'histoire'\n        }, {\n          id: 4,\n          name: 'Philosophie',\n          description: 'Ouvrages philosophiques'\n        }, {\n          id: 5,\n          name: 'Informatique',\n          description: 'Livres techniques'\n        }, {\n          id: 6,\n          name: 'Romance',\n          description: 'Romans d\\'amour'\n        }, {\n          id: 7,\n          name: 'Thriller',\n          description: 'Suspense et thriller'\n        }, {\n          id: 8,\n          name: 'Biographie',\n          description: 'Biographies et autobiographies'\n        }, {\n          id: 9,\n          name: 'Jeunesse',\n          description: 'Livres pour enfants et adolescents'\n        }, {\n          id: 10,\n          name: 'Essais',\n          description: 'Essais et analyses'\n        }];\n        localStorage.setItem('categories', JSON.stringify(this.categories));\n      }\n    }\n    loadMyBorrows() {\n      const localBorrows = JSON.parse(localStorage.getItem('localBorrows') || '[]');\n      const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]').filter(req => req.user_email === this.currentUser?.email).map(req => ({\n        id: req.id,\n        title: req.book_title,\n        author: req.book_author,\n        date_emprunt: req.request_date,\n        date_retour_prevue: req.status === 'approved' ? new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString() : null,\n        date_retour_effective: req.return_date,\n        status: req.status,\n        rejection_reason: req.rejection_reason\n      }));\n      const allBorrows = [...localBorrows, ...borrowRequests];\n      this.myBorrows = allBorrows;\n      this.currentBorrows = allBorrows.filter(b => b.status === 'pending' || b.status === 'approved');\n      this.borrowHistory = allBorrows.filter(b => b.status === 'returned' || b.status === 'rejected');\n    }\n    loadNotifications() {\n      // Charger depuis localStorage d'abord\n      const localNotifications = JSON.parse(localStorage.getItem('userNotifications_' + this.currentUser?.email) || '[]');\n      this.notifications = localNotifications;\n      this.unreadNotifications = localNotifications.filter(n => !n.is_read).length;\n      // Essayer de charger depuis l'API aussi\n      this.apiService.getNotifications().subscribe({\n        next: response => {\n          if (Array.isArray(response)) {\n            this.notifications = response;\n            this.unreadNotifications = response.filter(n => !n.is_read).length;\n          } else if (response.success) {\n            this.notifications = response.notifications;\n            this.unreadNotifications = response.notifications.filter(n => !n.is_read).length;\n          }\n        },\n        error: error => console.error('Erreur notifications API:', error)\n      });\n    }\n    searchBooks() {\n      this.loadBooks();\n    }\n    filterByCategory() {\n      this.loadBooks();\n    }\n    requestBorrow(bookId) {\n      if (this.currentUser?.status !== 'approved') {\n        alert('Votre compte doit être certifié par l\\'administrateur pour emprunter des livres.');\n        return;\n      }\n      const book = this.books.find(b => b.id === bookId);\n      if (!book || book.available <= 0) {\n        alert('Ce livre n\\'est pas disponible');\n        return;\n      }\n      // Créer une demande d'emprunt en attente\n      const borrowRequest = {\n        id: Date.now(),\n        user_id: this.currentUser?.id || 1,\n        user_name: this.currentUser?.name || 'Utilisateur',\n        user_email: this.currentUser?.email || '',\n        book_id: bookId,\n        book_title: book.title,\n        book_author: book.author,\n        request_date: new Date().toISOString(),\n        status: 'pending',\n        admin_response: null,\n        rejection_reason: null\n      };\n      // Sauvegarder la demande\n      const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]');\n      borrowRequests.push(borrowRequest);\n      localStorage.setItem('borrowRequests', JSON.stringify(borrowRequests));\n      alert('Demande d\\'emprunt envoyée ! Vous recevrez une notification une fois que l\\'administrateur aura traité votre demande.');\n      this.loadMyBorrows();\n    }\n    showDescription(book) {\n      this.selectedBook = book;\n    }\n    closeDescription() {\n      this.selectedBook = null;\n    }\n    getStatusLabel(status) {\n      const labels = {\n        'pending': 'En attente de validation',\n        'approved': 'Approuvé - À récupérer',\n        'active': 'En cours',\n        'returned': 'Retourné',\n        'overdue': 'En retard',\n        'rejected': 'Refusé'\n      };\n      return labels[status] || status;\n    }\n    // Nouvelles méthodes\n    getBorrowStatusClass(status) {\n      const classes = {\n        'pending': 'bg-warning',\n        'approved': 'bg-info',\n        'active': 'bg-primary',\n        'returned': 'bg-success',\n        'overdue': 'bg-danger',\n        'rejected': 'bg-danger'\n      };\n      return classes[status] || 'bg-secondary';\n    }\n    requestExtension(borrowId) {\n      console.log('Demande de prolongation pour emprunt:', borrowId);\n      alert('Demande de prolongation envoyée!');\n    }\n    downloadReceipt(borrowId) {\n      console.log('Télécharger reçu pour emprunt:', borrowId);\n    }\n    getNotificationIcon(type) {\n      const icons = {\n        'info': 'fa-info-circle',\n        'warning': 'fa-exclamation-triangle',\n        'error': 'fa-times-circle',\n        'success': 'fa-check-circle',\n        'loan_approved': 'fa-check-circle',\n        'loan_rejected': 'fa-times-circle',\n        'account_approved': 'fa-user-check'\n      };\n      return icons[type] || 'fa-bell';\n    }\n    markAsRead(notificationId) {\n      // Marquer comme lu dans localStorage\n      const localNotifications = JSON.parse(localStorage.getItem('userNotifications_' + this.currentUser?.email) || '[]');\n      const notification = localNotifications.find(n => n.id === notificationId);\n      if (notification) {\n        notification.is_read = true;\n        localStorage.setItem('userNotifications_' + this.currentUser?.email, JSON.stringify(localNotifications));\n      }\n      // Essayer de marquer comme lu via l'API si la méthode existe\n      if (this.apiService.markNotificationAsRead) {\n        this.apiService.markNotificationAsRead(notificationId).subscribe({\n          next: () => this.loadNotifications(),\n          error: error => {\n            console.error('Erreur API:', error);\n            this.loadNotifications(); // Recharger depuis localStorage\n          }\n        });\n      } else {\n        this.loadNotifications();\n      }\n    }\n    loadUserProfile() {\n      this.userProfile = {\n        name: this.currentUser?.name || '',\n        surname: '',\n        email: this.currentUser?.email || '',\n        phone: '',\n        tag_uid: null\n      };\n    }\n    updateProfile() {\n      console.log('Mise à jour profil:', this.userProfile);\n      alert('Profil mis à jour avec succès!');\n    }\n    requestNewCard() {\n      if (confirm('Demander un remplacement de carte? L\\'ancienne sera désactivée.')) {\n        console.log('Demande de remplacement de carte');\n        alert('Demande de remplacement envoyée!');\n      }\n    }\n    loadFAQs() {\n      this.faqs = [{\n        question: 'Comment emprunter un livre?',\n        answer: 'Vous pouvez emprunter un livre en utilisant le kiosque self-service ou en faisant une demande via le catalogue en ligne.',\n        expanded: false\n      }, {\n        question: 'Combien de temps puis-je garder un livre?',\n        answer: 'La durée d\\'emprunt standard est de 14 jours, avec possibilité de prolongation.',\n        expanded: false\n      }, {\n        question: 'Comment utiliser le kiosque IoT?',\n        answer: 'Placez votre carte RFID sur le lecteur, puis posez le livre. L\\'opération sera automatiquement détectée et traitée.',\n        expanded: false\n      }, {\n        question: 'Que faire si j\\'ai perdu ma carte?',\n        answer: 'Vous pouvez demander un remplacement via votre profil ou contacter l\\'administration.',\n        expanded: false\n      }];\n    }\n    toggleFAQ(index) {\n      this.faqs[index].expanded = !this.faqs[index].expanded;\n    }\n    getUserStatusClass() {\n      const status = this.currentUser?.status || 'pending';\n      return `status-${status}`;\n    }\n    getUserStatusText() {\n      const statusTexts = {\n        'pending': 'En attente',\n        'approved': 'Certifié',\n        'rejected': 'Refusé'\n      };\n      return statusTexts[this.currentUser?.status || 'pending'] || 'En attente';\n    }\n    getUserStatus() {\n      return this.currentUser?.status || 'pending';\n    }\n    getUserPhotoUrl() {\n      const userStr = localStorage.getItem('user');\n      if (userStr) {\n        try {\n          const user = JSON.parse(userStr);\n          const separatePhoto = localStorage.getItem('userPhoto_' + user.email);\n          const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');\n          const registeredUser = registeredUsers.find(u => u.email === user.email);\n          return registeredUser?.photo_url || user.photo_url || separatePhoto || null;\n        } catch (e) {\n          return null;\n        }\n      }\n      return null;\n    }\n    checkUserStatusUpdate() {\n      const userStr = localStorage.getItem('user');\n      const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');\n      if (userStr) {\n        try {\n          const storedUser = JSON.parse(userStr);\n          const updatedUser = registeredUsers.find(u => u.email === storedUser.email);\n          if (updatedUser && (updatedUser.status !== storedUser.status || updatedUser.photo_url !== storedUser.photo_url)) {\n            storedUser.status = updatedUser.status;\n            storedUser.photo_url = updatedUser.photo_url;\n            localStorage.setItem('user', JSON.stringify(storedUser));\n            this.currentUser = storedUser;\n            // Forcer la mise à jour de l'interface\n            setTimeout(() => {\n              window.location.reload();\n            }, 500);\n          }\n        } catch (e) {\n          console.error('Erreur lors de la vérification du statut:', e);\n        }\n      }\n    }\n    onImageError(event) {\n      event.target.src = this.getDefaultUserImage();\n    }\n    onBookImageError(event, book) {\n      event.target.src = this.getDefaultBookImage(book.genre || 'Fiction');\n    }\n    getDefaultUserImage() {\n      return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNlOWVjZWYiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA0IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSIjNmM3NTdkIi8+CjxwYXRoIGQ9Ik0xMiAxNEM5LjMzIDEzLjk5IDcuMDEgMTUuNjIgNiAxOEMxMC4wMSAyMCAxMy45OSAyMCAxOCAxOEMxNi45OSAxNS42MiAxNC42NyAxMy45OSAxMiAxNFoiIGZpbGw9IiM2Yzc1N2QiLz4KPC9zdmc+Cjwvc3ZnPgo=';\n    }\n    goToKiosk() {\n      this.setActiveTab('kiosk');\n    }\n    getGenreColor(genre) {\n      const colors = {\n        'Fiction': 'linear-gradient(45deg, #FF6347, #FF4500)',\n        'Science-Fiction': 'linear-gradient(45deg, #4682B4, #1E90FF)',\n        'Histoire': 'linear-gradient(45deg, #D2691E, #CD853F)',\n        'Philosophie': 'linear-gradient(45deg, #9370DB, #8A2BE2)',\n        'Informatique': 'linear-gradient(45deg, #20B2AA, #00CED1)',\n        'Romance': 'linear-gradient(45deg, #FF69B4, #FFB6C1)',\n        'Thriller': 'linear-gradient(45deg, #2F4F4F, #696969)',\n        'Action': 'linear-gradient(45deg, #DC143C, #B22222)',\n        'Romantique': 'linear-gradient(45deg, #FF1493, #FF69B4)',\n        'Fait Divers': 'linear-gradient(45deg, #32CD32, #228B22)'\n      };\n      return colors[genre] || 'linear-gradient(45deg, #DAA520, #B8860B)';\n    }\n    logout() {\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    static {\n      this.ɵfac = function UserDashboardComponent_Factory(t) {\n        return new (t || UserDashboardComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UserDashboardComponent,\n        selectors: [[\"app-user-dashboard\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 58,\n        vars: 28,\n        consts: [[1, \"user-layout\"], [1, \"top-nav\"], [1, \"nav-brand\"], [1, \"nav-logo\"], [1, \"nav-wifi\"], [1, \"nav-book\"], [1, \"nav-links\"], [1, \"nav-link\", 3, \"click\"], [1, \"fas\", \"fa-search\"], [1, \"fas\", \"fa-user\"], [\"class\", \"notification-badge\", 4, \"ngIf\"], [1, \"fas\", \"fa-wifi\"], [1, \"fas\", \"fa-bell\"], [1, \"fas\", \"fa-cog\"], [1, \"fas\", \"fa-question-circle\"], [1, \"nav-user\"], [1, \"user-info\"], [1, \"d-flex\", \"align-items-center\"], [1, \"user-avatar\", \"me-2\"], [\"alt\", \"Photo de profil\", 1, \"profile-photo\", 3, \"error\", \"src\"], [1, \"user-name\"], [1, \"user-status\"], [1, \"btn\", \"btn-outline-light\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-sign-out-alt\"], [1, \"main-content\"], [\"class\", \"content-section\", 4, \"ngIf\"], [\"class\", \"modal fade\", 3, \"show\", \"display\", 4, \"ngIf\"], [\"class\", \"modal-backdrop fade\", 3, \"show\", \"click\", 4, \"ngIf\"], [1, \"notification-badge\"], [1, \"content-section\"], [1, \"section-header\"], [1, \"text-muted\"], [1, \"row\", \"mb-4\"], [1, \"col-md-8\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Rechercher un livre...\", 1, \"form-control\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"col-md-4\"], [1, \"btn\", \"btn-outline-primary\", \"w-100\", 3, \"click\"], [1, \"fas\", \"fa-th-list\", \"me-2\"], [4, \"ngIf\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [\"class\", \"mb-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"mb-5\"], [1, \"category-header\", \"mb-3\"], [1, \"text-primary\"], [1, \"fas\", \"fa-folder-open\", \"me-2\"], [1, \"row\"], [\"class\", \"col-md-6 col-lg-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-6\", \"col-lg-4\", \"mb-4\"], [1, \"card\", \"book-card\", \"h-100\"], [1, \"book-cover\"], [1, \"cover-image\", 3, \"error\", \"src\", \"alt\"], [1, \"card-header\", \"border-0\", \"pb-2\"], [1, \"d-flex\", \"justify-content-start\"], [1, \"badge\"], [1, \"card-body\"], [1, \"card-title\", \"text-primary\", \"mb-2\"], [1, \"text-muted\", \"small\", \"mb-2\"], [1, \"fas\", \"fa-user\", \"me-1\"], [1, \"btn\", \"btn-sm\", \"btn-outline-info\", \"w-100\", \"mb-2\", 3, \"click\"], [1, \"fas\", \"fa-info-circle\", \"me-1\"], [1, \"card-footer\", \"border-0\", \"pt-0\"], [\"class\", \"btn btn-gradient btn-sm w-100\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-outline-secondary btn-sm w-100\", \"disabled\", \"\", 4, \"ngIf\"], [1, \"btn\", \"btn-gradient\", \"btn-sm\", \"w-100\", 3, \"click\"], [1, \"fas\", \"fa-hand-paper\", \"me-1\"], [\"disabled\", \"\", 1, \"btn\", \"btn-outline-secondary\", \"btn-sm\", \"w-100\"], [1, \"fas\", \"fa-times\", \"me-1\"], [1, \"text-center\", \"py-5\"], [1, \"fas\", \"fa-book\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"class\", \"btn btn-gradient\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"btn\", \"btn-gradient\", 3, \"click\"], [1, \"fas\", \"fa-hand-paper\", \"me-2\"], [1, \"modal-backdrop\", \"fade\", 3, \"click\"], [1, \"sub-nav\", \"mb-4\"], [1, \"btn\", 3, \"click\"], [\"class\", \"col-md-6 mb-3\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [1, \"col-md-6\", \"mb-3\"], [1, \"card\", \"borrow-card\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-start\", \"mb-2\"], [1, \"card-title\", \"mb-0\"], [1, \"borrow-dates\"], [1, \"date-item\"], [1, \"fas\", \"fa-calendar-plus\", \"text-primary\"], [\"class\", \"date-item\", 4, \"ngIf\"], [\"class\", \"mt-3\", 4, \"ngIf\"], [1, \"fas\", \"fa-calendar-check\"], [1, \"fas\", \"fa-exclamation-triangle\", \"text-danger\"], [1, \"text-danger\"], [1, \"mt-3\"], [1, \"fas\", \"fa-clock\", \"me-1\"], [1, \"empty-state\"], [1, \"fas\", \"fa-clock\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [\"title\", \"T\\u00E9l\\u00E9charger re\\u00E7u\", 1, \"btn\", \"btn-sm\", \"btn-outline-info\", 3, \"click\"], [1, \"fas\", \"fa-download\"], [1, \"fas\", \"fa-history\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"kiosk-interface\"], [1, \"user-session\"], [1, \"session-card\"], [1, \"fas\", \"fa-user-circle\"], [1, \"qr-code-placeholder\"], [1, \"fas\", \"fa-qrcode\", \"fa-3x\"], [1, \"instructions\"], [1, \"instruction-card\"], [1, \"step-number\"], [1, \"step-content\"], [\"class\", \"scan-result\", 4, \"ngIf\"], [1, \"scan-result\"], [1, \"alert\"], [1, \"fas\"], [1, \"notifications-list\"], [\"class\", \"notification-item\", 3, \"unread\", 4, \"ngFor\", \"ngForOf\"], [1, \"notification-item\"], [1, \"notification-icon\"], [1, \"notification-content\"], [1, \"notification-actions\"], [\"class\", \"btn btn-sm btn-outline-primary\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"click\"], [1, \"fas\", \"fa-check\"], [1, \"fas\", \"fa-bell\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"card\"], [1, \"card-header\"], [1, \"col-md-6\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"name\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"surname\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"email\", \"name\", \"email\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"tel\", \"name\", \"phone\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"password\", \"name\", \"password\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"fas\", \"fa-save\"], [1, \"card-body\", \"text-center\"], [1, \"card-uid\"], [1, \"fas\", \"fa-id-card\", \"fa-3x\", \"mb-3\"], [1, \"btn\", \"btn-outline-primary\", \"mt-3\", 3, \"click\"], [1, \"fas\", \"fa-sync\"], [1, \"faq-list\"], [\"class\", \"faq-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"info-item\"], [1, \"fas\", \"fa-clock\"], [1, \"mb-0\"], [1, \"fas\", \"fa-envelope\"], [1, \"fas\", \"fa-phone\"], [1, \"faq-item\"], [1, \"faq-question\", 3, \"click\"], [1, \"faq-answer\"]],\n        template: function UserDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"nav\", 1)(2, \"div\", 2)(3, \"div\", 3);\n            i0.ɵɵelement(4, \"div\", 4)(5, \"div\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"span\");\n            i0.ɵɵtext(7, \"eLibrary\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 6)(9, \"a\", 7);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_9_listener() {\n              return ctx.setActiveTab(\"catalog\");\n            });\n            i0.ɵɵelement(10, \"i\", 8);\n            i0.ɵɵelementStart(11, \"span\");\n            i0.ɵɵtext(12, \"Catalogue\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"a\", 7);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_13_listener() {\n              return ctx.setActiveTab(\"my-account\");\n            });\n            i0.ɵɵelement(14, \"i\", 9);\n            i0.ɵɵelementStart(15, \"span\");\n            i0.ɵɵtext(16, \"Mon compte\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(17, UserDashboardComponent_span_17_Template, 2, 1, \"span\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"a\", 7);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_18_listener() {\n              return ctx.setActiveTab(\"kiosk\");\n            });\n            i0.ɵɵelement(19, \"i\", 11);\n            i0.ɵɵelementStart(20, \"span\");\n            i0.ɵɵtext(21, \"Kiosque\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(22, \"a\", 7);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_22_listener() {\n              return ctx.setActiveTab(\"notifications\");\n            });\n            i0.ɵɵelement(23, \"i\", 12);\n            i0.ɵɵelementStart(24, \"span\");\n            i0.ɵɵtext(25, \"Notifications\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(26, UserDashboardComponent_span_26_Template, 2, 1, \"span\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"a\", 7);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_27_listener() {\n              return ctx.setActiveTab(\"profile\");\n            });\n            i0.ɵɵelement(28, \"i\", 13);\n            i0.ɵɵelementStart(29, \"span\");\n            i0.ɵɵtext(30, \"Profil\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(31, \"a\", 7);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_a_click_31_listener() {\n              return ctx.setActiveTab(\"help\");\n            });\n            i0.ɵɵelement(32, \"i\", 14);\n            i0.ɵɵelementStart(33, \"span\");\n            i0.ɵɵtext(34, \"Aide\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(35, UserDashboardComponent_span_35_Template, 2, 1, \"span\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(36, \"div\", 15)(37, \"div\", 16)(38, \"div\", 17)(39, \"div\", 18)(40, \"img\", 19);\n            i0.ɵɵlistener(\"error\", function UserDashboardComponent_Template_img_error_40_listener($event) {\n              return ctx.onImageError($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(41, \"div\")(42, \"span\", 20);\n            i0.ɵɵtext(43);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(44, \"br\");\n            i0.ɵɵelementStart(45, \"span\", 21);\n            i0.ɵɵtext(46);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(47, \"button\", 22);\n            i0.ɵɵlistener(\"click\", function UserDashboardComponent_Template_button_click_47_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵelement(48, \"i\", 23);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(49, \"div\", 24);\n            i0.ɵɵtemplate(50, UserDashboardComponent_div_50_Template, 20, 5, \"div\", 25)(51, UserDashboardComponent_div_51_Template, 34, 13, \"div\", 26)(52, UserDashboardComponent_div_52_Template, 1, 2, \"div\", 27)(53, UserDashboardComponent_div_53_Template, 14, 6, \"div\", 25)(54, UserDashboardComponent_div_54_Template, 48, 3, \"div\", 25)(55, UserDashboardComponent_div_55_Template, 10, 2, \"div\", 25)(56, UserDashboardComponent_div_56_Template, 57, 6, \"div\", 25)(57, UserDashboardComponent_div_57_Template, 40, 1, \"div\", 25);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(9);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"catalog\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"my-account\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.currentBorrows.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"kiosk\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"notifications\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.unreadNotifications > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"profile\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"help\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.faqs.length > 0);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"src\", ctx.getUserPhotoUrl() || ctx.getDefaultUserImage(), i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate(ctx.currentUser == null ? null : ctx.currentUser.name);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassMap(ctx.getUserStatusClass());\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\" \", ctx.getUserStatusText(), \" \");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"catalog\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedBook);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.selectedBook);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"my-account\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"kiosk\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"notifications\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"profile\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"help\");\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, i4.NgIf, i4.DatePipe, FormsModule, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n        styles: [\".user-layout[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.top-nav[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5a9bd4,#87ceeb,#20b2aa);color:#fff;padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 10px #0000001a}.nav-brand[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;font-weight:600}.nav-logo[_ngcontent-%COMP%]{width:32px;height:32px;margin-right:.5rem;position:relative}.nav-wifi[_ngcontent-%COMP%]{width:16px;height:4px;background:#fff;border-radius:8px 8px 0 0;margin:0 auto 2px}.nav-book[_ngcontent-%COMP%]{width:24px;height:20px;background:#fff;border-radius:3px;margin:0 auto;position:relative}.nav-book[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:3px;left:3px;right:3px;height:14px;background:#ffffff4d;border-radius:1px}.nav-links[_ngcontent-%COMP%]{display:flex;gap:1rem}.nav-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.5rem 1rem;color:#fffc;text-decoration:none;border-radius:8px;transition:all .3s;cursor:pointer;position:relative}.nav-link[_ngcontent-%COMP%]:hover{background:#ffffff1a;color:#fff}.nav-link.active[_ngcontent-%COMP%]{background:#fff3;color:#fff}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:.25rem}.nav-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8rem}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;background:#dc3545;color:#fff;border-radius:50%;width:18px;height:18px;font-size:.7rem;display:flex;align-items:center;justify-content:center}.nav-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;border:2px solid rgba(255,255,255,.3)}.profile-photo[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.default-avatar[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff3;display:flex;align-items:center;justify-content:center;border-radius:50%;color:#fff;font-size:1.2rem}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.user-name[_ngcontent-%COMP%]{font-weight:500}.user-status[_ngcontent-%COMP%]{font-size:.75rem;padding:2px 8px;border-radius:12px;margin-top:2px}.status-pending[_ngcontent-%COMP%]{background:#ffc10733;color:#856404}.status-approved[_ngcontent-%COMP%]{background:#28a74533;color:#155724}.status-rejected[_ngcontent-%COMP%]{background:#dc354533;color:#721c24}.main-content[_ngcontent-%COMP%]{flex:1;padding:2rem;background:#f8f9fa}.content-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.section-header[_ngcontent-%COMP%]{margin-bottom:2rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:.5rem}.sub-nav[_ngcontent-%COMP%]{display:flex;gap:.5rem}.book-card[_ngcontent-%COMP%]{transition:all .3s ease;border:none;box-shadow:0 5px 15px #00000014;border-radius:12px;overflow:hidden}.book-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #00000026}.book-cover[_ngcontent-%COMP%]{height:200px;overflow:hidden;position:relative}.cover-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.book-card[_ngcontent-%COMP%]:hover   .cover-image[_ngcontent-%COMP%]{transform:scale(1.05)}.borrow-card[_ngcontent-%COMP%]{border:none;border-radius:12px;box-shadow:0 3px 10px #0000001a;transition:all .3s}.borrow-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #00000026}.borrow-dates[_ngcontent-%COMP%]{background:#f8f9fa;padding:.75rem;border-radius:8px;margin-top:1rem}.date-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem}.date-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.date-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;width:16px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem}.kiosk-interface[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:2rem;margin-bottom:2rem}.session-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 5px 15px #0000001a;text-align:center}.qr-code-placeholder[_ngcontent-%COMP%]{background:#f8f9fa;padding:2rem;border-radius:8px;margin-top:1rem}.instructions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.instruction-card[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 3px 10px #0000001a}.step-number[_ngcontent-%COMP%]{width:40px;height:40px;background:#007bff;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;margin-right:1rem}.step-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:.25rem}.notifications-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;background:#fff;padding:1.5rem;border-radius:12px;box-shadow:0 3px 10px #0000001a;border-left:4px solid #dee2e6}.notification-item.unread[_ngcontent-%COMP%]{border-left-color:#007bff;background:#f8f9ff}.notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#e9ecef;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:1rem}.notification-content[_ngcontent-%COMP%]{flex:1}.notification-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-bottom:.5rem}.card-uid[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.5rem;border-radius:8px}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;margin-bottom:1rem}.info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;margin-right:1rem;margin-top:.25rem;color:#007bff}.faq-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.faq-item[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.faq-question[_ngcontent-%COMP%]{padding:1rem;cursor:pointer;display:flex;justify-content:between;align-items:center;background:#f8f9fa;border-bottom:1px solid #dee2e6}.faq-question[_ngcontent-%COMP%]:hover{background:#e9ecef}.faq-question[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;flex:1}.faq-answer[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s ease}.faq-answer.expanded[_ngcontent-%COMP%]{max-height:200px}.faq-answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:1rem;margin:0}.btn-gradient[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4caf50,#66bb6a);border:none;color:#fff;font-weight:500;transition:all .3s ease}.btn-gradient[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #4caf5066;color:#fff}@media (max-width: 768px){.top-nav[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.nav-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.kiosk-interface[_ngcontent-%COMP%]{grid-template-columns:1fr}.main-content[_ngcontent-%COMP%]{padding:1rem}}\"]\n      });\n    }\n  }\n  return UserDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}