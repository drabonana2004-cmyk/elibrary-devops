{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../services/pdf.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nfunction AdminDashboardComponent_span_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.users.length);\n  }\n}\nfunction AdminDashboardComponent_span_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 32);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.getPendingBorrowRequests().length);\n  }\n}\nfunction AdminDashboardComponent_span_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.books.length);\n  }\n}\nfunction AdminDashboardComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.iotDevices.length);\n  }\n}\nfunction AdminDashboardComponent_span_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.overdueBorrows.length);\n  }\n}\nfunction AdminDashboardComponent_span_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.registrationRequests.length);\n  }\n}\nfunction AdminDashboardComponent_span_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.auditLogs.length);\n  }\n}\nfunction AdminDashboardComponent_div_63_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 55)(1, \"div\", 56);\n    i0.ɵɵelement(2, \"i\", 57);\n    i0.ɵɵelementStart(3, \"div\", 58)(4, \"h5\", 59);\n    i0.ɵɵtext(5, \"\\uD83D\\uDD14 Nouvelle(s) demande(s) d'inscription\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 60);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 61);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_63_div_1_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      ctx_r0.setActiveTab(\"requests\");\n      return i0.ɵɵresetView(ctx_r0.markNotificationsAsViewed());\n    });\n    i0.ɵɵelement(9, \"i\", 62);\n    i0.ɵɵtext(10, \"Examiner les demandes \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"span\", 63);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 64);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_63_div_1_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.dismissAlert());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.getNewRegistrationsCount(), \" nouvelle(s) demande(s) en attente de votre approbation\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.getNewRegistrationsCount());\n  }\n}\nfunction AdminDashboardComponent_div_63_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementStart(4, \"small\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const book_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r3.title);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" - \", book_r3.author, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", book_r3.borrow_count, \" emprunts)\");\n  }\n}\nfunction AdminDashboardComponent_div_63_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"small\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const borrow_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r4.book_title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", borrow_r4.user_name, \" - \", i0.ɵɵpipeBind1(6, 3, borrow_r4.date_emprunt), \"\");\n  }\n}\nfunction AdminDashboardComponent_div_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtemplate(1, AdminDashboardComponent_div_63_div_1_Template, 14, 2, \"div\", 35);\n    i0.ɵɵelementStart(2, \"div\", 36)(3, \"div\", 37)(4, \"div\", 38)(5, \"div\", 39)(6, \"div\", 40)(7, \"div\")(8, \"h4\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11, \"Livres Total\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(12, \"i\", 41);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(13, \"div\", 37)(14, \"div\", 42)(15, \"div\", 39)(16, \"div\", 40)(17, \"div\")(18, \"h4\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"p\");\n    i0.ɵɵtext(21, \"Utilisateurs\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(22, \"i\", 43);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(23, \"div\", 37)(24, \"div\", 44)(25, \"div\", 39)(26, \"div\", 40)(27, \"div\")(28, \"h4\");\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"p\");\n    i0.ɵɵtext(31, \"Emprunts Actifs\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(32, \"i\", 45);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(33, \"div\", 37)(34, \"div\", 46)(35, \"div\", 39)(36, \"div\", 40)(37, \"div\")(38, \"h4\");\n    i0.ɵɵtext(39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"p\");\n    i0.ɵɵtext(41, \"En Retard\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(42, \"i\", 47);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(43, \"div\", 48)(44, \"div\", 49)(45, \"div\", 50)(46, \"div\", 51)(47, \"h5\");\n    i0.ɵɵelement(48, \"i\", 52);\n    i0.ɵɵtext(49, \" Livres Populaires\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(50, \"div\", 39);\n    i0.ɵɵtemplate(51, AdminDashboardComponent_div_63_div_51_Template, 6, 3, \"div\", 53);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(52, \"div\", 49)(53, \"div\", 50)(54, \"div\", 51)(55, \"h5\");\n    i0.ɵɵelement(56, \"i\", 54);\n    i0.ɵɵtext(57, \" Emprunts R\\u00E9cents\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(58, \"div\", 39);\n    i0.ɵɵtemplate(59, AdminDashboardComponent_div_63_div_59_Template, 7, 5, \"div\", 53);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.hasNewRegistrations());\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r0.stats.stats.total_books);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r0.stats.stats.total_users);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r0.stats.stats.active_borrows);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(ctx_r0.stats.stats.overdue_borrows);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.stats.popular_books);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.stats.recent_borrows);\n  }\n}\nfunction AdminDashboardComponent_div_64_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cat_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cat_r6.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(cat_r6.name);\n  }\n}\nfunction AdminDashboardComponent_div_64_tr_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"input\", 87);\n    i0.ɵɵlistener(\"change\", function AdminDashboardComponent_div_64_tr_45_Template_input_change_2_listener($event) {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.toggleBookSelection(book_r8.id, $event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵelement(4, \"img\", 88);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"strong\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"br\");\n    i0.ɵɵelementStart(9, \"small\", 7);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\")(20, \"span\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"td\");\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"td\")(25, \"button\", 89);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_tr_45_Template_button_click_25_listener() {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.viewBook(book_r8));\n    });\n    i0.ɵɵelement(26, \"i\", 90);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 91);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_tr_45_Template_button_click_27_listener() {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.editBook(book_r8));\n    });\n    i0.ɵɵelement(28, \"i\", 92);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"button\", 93);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_tr_45_Template_button_click_29_listener() {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.assignTag(book_r8));\n    });\n    i0.ɵɵelement(30, \"i\", 94);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 95);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_tr_45_Template_button_click_31_listener() {\n      const book_r8 = i0.ɵɵrestoreView(_r7).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.confirmDeleteBook(book_r8));\n    });\n    i0.ɵɵelement(32, \"i\", 96);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const book_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", book_r8.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", book_r8.cover_url || \"assets/book-placeholder.jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(book_r8.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", book_r8.times_borrowed || 0, \" emprunts\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.author);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.isbn);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.category == null ? null : book_r8.category.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.location || \"Non d\\u00E9finie\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(book_r8.stock > 0 ? \"text-success\" : \"text-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\"\", book_r8.available || 0, \"/\", book_r8.stock, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(book_r8.tag_uid || \"\\u2014\");\n  }\n}\nfunction AdminDashboardComponent_div_64_div_54_option_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 86);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r10.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", category_r10.name, \" \");\n  }\n}\nfunction AdminDashboardComponent_div_64_div_54_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 115)(1, \"div\", 48)(2, \"div\", 49)(3, \"input\", 116);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_div_39_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newCategory.name, $event) || (ctx_r0.newCategory.name = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 81)(5, \"input\", 117);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_div_39_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newCategory.description, $event) || (ctx_r0.newCategory.description = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 118)(7, \"button\", 119);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_div_54_div_39_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.addNewCategory());\n    });\n    i0.ɵɵelement(8, \"i\", 120);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 121);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_div_54_div_39_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.showAddCategoryForm = false);\n    });\n    i0.ɵɵelement(10, \"i\", 122);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newCategory.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newCategory.description);\n  }\n}\nfunction AdminDashboardComponent_div_64_div_54_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 123);\n    i0.ɵɵelement(1, \"img\", 124);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r0.newBook.cover_preview, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminDashboardComponent_div_64_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 97)(1, \"div\", 51)(2, \"h5\");\n    i0.ɵɵtext(3, \"Nouveau Livre\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 39)(5, \"form\", 98);\n    i0.ɵɵlistener(\"ngSubmit\", function AdminDashboardComponent_div_64_div_54_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.addBook());\n    });\n    i0.ɵɵelementStart(6, \"div\", 48)(7, \"div\", 49)(8, \"div\", 99)(9, \"label\", 100);\n    i0.ɵɵtext(10, \"Titre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 101);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newBook.title, $event) || (ctx_r0.newBook.title = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 49)(13, \"div\", 99)(14, \"label\", 100);\n    i0.ɵɵtext(15, \"Auteur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 102);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newBook.author, $event) || (ctx_r0.newBook.author = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(17, \"div\", 48)(18, \"div\", 81)(19, \"div\", 99)(20, \"label\", 100);\n    i0.ɵɵtext(21, \"ISBN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 103);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newBook.isbn, $event) || (ctx_r0.newBook.isbn = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"div\", 81)(24, \"div\", 99)(25, \"label\", 100);\n    i0.ɵɵtext(26, \"Cat\\u00E9gorie\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"div\", 104)(28, \"select\", 105);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_Template_select_ngModelChange_28_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newBook.category_id, $event) || (ctx_r0.newBook.category_id = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(29, \"option\", 69);\n    i0.ɵɵtext(30, \"S\\u00E9lectionner...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(31, AdminDashboardComponent_div_64_div_54_option_31_Template, 2, 2, \"option\", 70);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"button\", 106);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_div_54_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.showAddCategoryForm = true);\n    });\n    i0.ɵɵelement(33, \"i\", 83);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(34, \"div\", 81)(35, \"div\", 99)(36, \"label\", 100);\n    i0.ɵɵtext(37, \"Stock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"input\", 107);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_Template_input_ngModelChange_38_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newBook.stock, $event) || (ctx_r0.newBook.stock = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵtemplate(39, AdminDashboardComponent_div_64_div_54_div_39_Template, 11, 2, \"div\", 108);\n    i0.ɵɵelementStart(40, \"div\", 99)(41, \"label\", 100);\n    i0.ɵɵtext(42, \"Couverture du livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"input\", 109);\n    i0.ɵɵlistener(\"change\", function AdminDashboardComponent_div_64_div_54_Template_input_change_43_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.onBookCoverSelect($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"small\", 7);\n    i0.ɵɵtext(45, \"Ou laissez vide pour une couverture par d\\u00E9faut selon la cat\\u00E9gorie\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(46, AdminDashboardComponent_div_64_div_54_div_46_Template, 2, 1, \"div\", 110);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"div\", 99)(48, \"label\", 100);\n    i0.ɵɵtext(49, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"textarea\", 111);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_div_54_Template_textarea_ngModelChange_50_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      i0.ɵɵtwoWayBindingSet(ctx_r0.newBook.description, $event) || (ctx_r0.newBook.description = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(51, \"div\", 112)(52, \"button\", 113);\n    i0.ɵɵtext(53, \"Ajouter\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(54, \"button\", 114);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_div_54_Template_button_click_54_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.cancelAddBook());\n    });\n    i0.ɵɵtext(55, \"Annuler\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(11);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newBook.title);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newBook.author);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newBook.isbn);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newBook.category_id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categories);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newBook.stock);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showAddCategoryForm);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.newBook.cover_preview);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.newBook.description);\n  }\n}\nfunction AdminDashboardComponent_div_64_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 125)(1, \"div\", 50)(2, \"div\", 39)(3, \"h6\", 126);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 127)(6, \"strong\");\n    i0.ɵɵtext(7, \"Auteur:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11, \"Cat\\u00E9gorie:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"strong\");\n    i0.ɵɵtext(15, \"Stock:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const book_r12 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(book_r12.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", book_r12.author, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", book_r12.category == null ? null : book_r12.category.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", book_r12.available, \"/\", book_r12.stock, \" \");\n  }\n}\nfunction AdminDashboardComponent_div_64_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 65)(2, \"div\", 66)(3, \"input\", 67);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.bookSearch, $event) || (ctx_r0.bookSearch = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"input\", function AdminDashboardComponent_div_64_Template_input_input_3_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.searchBooks());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 68);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.bookCategoryFilter, $event) || (ctx_r0.bookCategoryFilter = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function AdminDashboardComponent_div_64_Template_select_change_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.filterBooks());\n    });\n    i0.ɵɵelementStart(5, \"option\", 69);\n    i0.ɵɵtext(6, \"Toutes cat\\u00E9gories\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AdminDashboardComponent_div_64_option_7_Template, 2, 2, \"option\", 70);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"select\", 68);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_64_Template_select_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.bookAvailabilityFilter, $event) || (ctx_r0.bookAvailabilityFilter = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function AdminDashboardComponent_div_64_Template_select_change_8_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.filterBooks());\n    });\n    i0.ɵɵelementStart(9, \"option\", 69);\n    i0.ɵɵtext(10, \"Toutes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 71);\n    i0.ɵɵtext(12, \"Disponibles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 72);\n    i0.ɵɵtext(14, \"Indisponibles\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"div\")(16, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.exportBooks());\n    });\n    i0.ɵɵtext(17, \"Export CSV\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 74);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.showAddBookForm = true);\n    });\n    i0.ɵɵtext(19, \"+ Ajouter Livre\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(20, \"div\", 75)(21, \"table\", 76)(22, \"thead\")(23, \"tr\")(24, \"th\")(25, \"input\", 77);\n    i0.ɵɵlistener(\"change\", function AdminDashboardComponent_div_64_Template_input_change_25_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.selectAllBooks($event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"th\");\n    i0.ɵɵtext(27, \"Couverture\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\");\n    i0.ɵɵtext(29, \"Titre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"Auteur(s)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\");\n    i0.ɵɵtext(33, \"ISBN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"th\");\n    i0.ɵɵtext(35, \"Cat\\u00E9gorie\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"th\");\n    i0.ɵɵtext(37, \"Localisation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"th\");\n    i0.ɵɵtext(39, \"Stock\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"th\");\n    i0.ɵɵtext(41, \"Tag UID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"th\");\n    i0.ɵɵtext(43, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(44, \"tbody\");\n    i0.ɵɵtemplate(45, AdminDashboardComponent_div_64_tr_45_Template, 33, 13, \"tr\", 78);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(46, \"div\", 79)(47, \"div\", 80)(48, \"h4\");\n    i0.ɵɵtext(49, \"Gestion des Livres\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(50, \"div\", 81)(51, \"button\", 82);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_64_Template_button_click_51_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.showAddBookForm = true);\n    });\n    i0.ɵɵelement(52, \"i\", 83);\n    i0.ɵɵtext(53, \" Ajouter un Livre \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(54, AdminDashboardComponent_div_64_div_54_Template, 56, 9, \"div\", 84);\n    i0.ɵɵelementStart(55, \"div\", 48);\n    i0.ɵɵtemplate(56, AdminDashboardComponent_div_64_div_56_Template, 17, 5, \"div\", 85);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.bookSearch);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.bookCategoryFilter);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.categories);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.bookAvailabilityFilter);\n    i0.ɵɵadvance(37);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.filteredBooks);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showAddBookForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.books);\n  }\n}\nfunction AdminDashboardComponent_div_65_tr_43_img_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 145);\n    i0.ɵɵlistener(\"error\", function AdminDashboardComponent_div_65_tr_43_img_5_Template_img_error_0_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.onUserImageError($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r16 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", user_r16.photo_url, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction AdminDashboardComponent_div_65_tr_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"div\", 56);\n    i0.ɵɵtemplate(5, AdminDashboardComponent_div_65_tr_43_img_5_Template, 1, 1, \"img\", 136);\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"span\", 137);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\")(18, \"span\", 138);\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"td\");\n    i0.ɵɵtext(21);\n    i0.ɵɵpipe(22, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"td\")(24, \"button\", 139);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_65_tr_43_Template_button_click_24_listener() {\n      const user_r16 = i0.ɵɵrestoreView(_r14).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.viewUserProfile(user_r16));\n    });\n    i0.ɵɵelement(25, \"i\", 90);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"button\", 140);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_65_tr_43_Template_button_click_26_listener() {\n      const user_r16 = i0.ɵɵrestoreView(_r14).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.assignUserTag(user_r16));\n    });\n    i0.ɵɵelement(27, \"i\", 141);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"button\", 142);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_65_tr_43_Template_button_click_28_listener() {\n      const user_r16 = i0.ɵɵrestoreView(_r14).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.toggleUserStatus(user_r16));\n    });\n    i0.ɵɵelement(29, \"i\", 143);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"button\", 144);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_65_tr_43_Template_button_click_30_listener() {\n      const user_r16 = i0.ɵɵrestoreView(_r14).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.deleteUser(user_r16));\n    });\n    i0.ɵɵelement(31, \"i\", 96);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const user_r16 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r16.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", user_r16.status === \"approved\" && user_r16.photo_url);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", user_r16.name, \" \", user_r16.surname || \"\", \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r16.email);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r16.role || \"user\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r16.tag_uid || \"\\u2014\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.getUserActiveBorrows(user_r16.id));\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(user_r16.status === \"approved\" ? \"bg-success\" : \"bg-warning\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.getStatusLabel(user_r16.status));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(22, 16, user_r16.created_at, \"short\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵclassMap(user_r16.status === \"active\" ? \"btn-outline-warning\" : \"btn-outline-success\");\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(user_r16.status === \"active\" ? \"fa-ban\" : \"fa-check\");\n  }\n}\nfunction AdminDashboardComponent_div_65_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 146);\n    i0.ɵɵelement(1, \"i\", 147);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Aucun utilisateur certifi\\u00E9 trouv\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"small\");\n    i0.ɵɵtext(5, \"Les utilisateurs apparaissent ici apr\\u00E8s validation de leur inscription\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AdminDashboardComponent_div_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 65)(2, \"div\", 66)(3, \"input\", 128);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_65_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userSearch, $event) || (ctx_r0.userSearch = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 129);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_65_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userRoleFilter, $event) || (ctx_r0.userRoleFilter = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(5, \"option\", 69);\n    i0.ɵɵtext(6, \"Tous r\\u00F4les\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 130);\n    i0.ɵɵtext(8, \"Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 131);\n    i0.ɵɵtext(10, \"Admin\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"select\", 129);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_65_Template_select_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.userStatusFilter, $event) || (ctx_r0.userStatusFilter = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(12, \"option\", 69);\n    i0.ɵɵtext(13, \"Tous statuts\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"option\", 132);\n    i0.ɵɵtext(15, \"Actif\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"option\", 133);\n    i0.ɵɵtext(17, \"Suspendu\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"button\", 134);\n    i0.ɵɵtext(19, \"Export CSV\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 75)(21, \"table\", 76)(22, \"thead\")(23, \"tr\")(24, \"th\");\n    i0.ɵɵtext(25, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"th\");\n    i0.ɵɵtext(27, \"Nom Pr\\u00E9nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"th\");\n    i0.ɵɵtext(29, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"th\");\n    i0.ɵɵtext(31, \"R\\u00F4le\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"th\");\n    i0.ɵɵtext(33, \"Tag UID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"th\");\n    i0.ɵɵtext(35, \"Emprunts en cours\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"th\");\n    i0.ɵɵtext(37, \"Statut\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"th\");\n    i0.ɵɵtext(39, \"Inscription\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"th\");\n    i0.ɵɵtext(41, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(42, \"tbody\");\n    i0.ɵɵtemplate(43, AdminDashboardComponent_div_65_tr_43_Template, 32, 19, \"tr\", 78);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(44, AdminDashboardComponent_div_65_div_44_Template, 6, 0, \"div\", 135);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userSearch);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userRoleFilter);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.userStatusFilter);\n    i0.ɵɵadvance(32);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getFilteredUsers());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.getFilteredUsers().length === 0);\n  }\n}\nfunction AdminDashboardComponent_div_66_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 152);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.getPendingBorrowRequests().length);\n  }\n}\nfunction AdminDashboardComponent_div_66_div_14_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\")(9, \"span\", 153);\n    i0.ɵɵtext(10, \"En attente\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 154);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_66_div_14_tr_15_Template_button_click_12_listener() {\n      const request_r19 = i0.ɵɵrestoreView(_r18).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.approveBorrowRequest(request_r19.id));\n    });\n    i0.ɵɵelement(13, \"i\", 120);\n    i0.ɵɵtext(14, \" Approuver \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 155);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_66_div_14_tr_15_Template_button_click_15_listener() {\n      const request_r19 = i0.ɵɵrestoreView(_r18).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.rejectBorrowRequest(request_r19.id));\n    });\n    i0.ɵɵelement(16, \"i\", 122);\n    i0.ɵɵtext(17, \" Rejeter \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const request_r19 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r19.user_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r19.book_title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 3, request_r19.request_date, \"short\"));\n  }\n}\nfunction AdminDashboardComponent_div_66_div_14_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 146);\n    i0.ɵɵelement(1, \"i\", 156);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Aucune demande d'emprunt en attente\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AdminDashboardComponent_div_66_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 75)(1, \"table\", 76)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Date demande\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Statut\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, AdminDashboardComponent_div_66_div_14_tr_15_Template, 18, 6, \"tr\", 78);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, AdminDashboardComponent_div_66_div_14_div_16_Template, 4, 0, \"div\", 135);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getPendingBorrowRequests());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.getPendingBorrowRequests().length === 0);\n  }\n}\nfunction AdminDashboardComponent_div_66_div_15_tr_19_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 160);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_66_div_15_tr_19_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const borrow_r21 = i0.ɵɵnextContext().$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.returnBook(borrow_r21.id));\n    });\n    i0.ɵɵelement(1, \"i\", 120);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_66_div_15_tr_19_button_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 161);\n    i0.ɵɵelement(1, \"i\", 162);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_66_div_15_tr_19_button_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 163);\n    i0.ɵɵelement(1, \"i\", 164);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_66_div_15_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\")(14, \"span\", 138);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtemplate(17, AdminDashboardComponent_div_66_div_15_tr_19_button_17_Template, 2, 0, \"button\", 157)(18, AdminDashboardComponent_div_66_div_15_tr_19_button_18_Template, 2, 0, \"button\", 158)(19, AdminDashboardComponent_div_66_div_15_tr_19_button_19_Template, 2, 0, \"button\", 159);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const borrow_r21 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r21.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r21.book_title || borrow_r21.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(borrow_r21.user_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(9, 11, borrow_r21.request_date || borrow_r21.date_emprunt, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 14, borrow_r21.due_date || borrow_r21.date_retour_prevue, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.getBorrowStatusClass(borrow_r21.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.getStatusLabel(borrow_r21.status));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", borrow_r21.status === \"active\" || borrow_r21.status === \"approved\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", borrow_r21.status === \"active\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", borrow_r21.status === \"active\" || borrow_r21.status === \"overdue\");\n  }\n}\nfunction AdminDashboardComponent_div_66_div_15_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 146);\n    i0.ɵɵelement(1, \"i\", 165);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"{{borrowView === 'current' ? 'Aucun emprunt en cours' : 'Aucun historique d'emprunt'}}\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AdminDashboardComponent_div_66_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 75)(1, \"table\", 76)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Date emprunt\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Date retour pr\\u00E9vue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Statut\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"tbody\");\n    i0.ɵɵtemplate(19, AdminDashboardComponent_div_66_div_15_tr_19_Template, 20, 17, \"tr\", 78);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(20, AdminDashboardComponent_div_66_div_15_div_20_Template, 4, 0, \"div\", 135);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(19);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getFilteredBorrows());\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.getFilteredBorrows().length === 0);\n  }\n}\nfunction AdminDashboardComponent_div_66_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 36)(2, \"div\", 118)(3, \"button\", 148);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_66_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.borrowView = \"pending\");\n    });\n    i0.ɵɵtext(4, \" Demandes \");\n    i0.ɵɵtemplate(5, AdminDashboardComponent_div_66_span_5_Template, 2, 1, \"span\", 149);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 118)(7, \"button\", 148);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_66_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.borrowView = \"current\");\n    });\n    i0.ɵɵtext(8, \"En cours\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 118)(10, \"button\", 148);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_66_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.borrowView = \"history\");\n    });\n    i0.ɵɵtext(11, \"Historique\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 49);\n    i0.ɵɵelement(13, \"input\", 150);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(14, AdminDashboardComponent_div_66_div_14_Template, 17, 2, \"div\", 151)(15, AdminDashboardComponent_div_66_div_15_Template, 21, 2, \"div\", 151);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.borrowView === \"pending\" ? \"btn-warning\" : \"btn-outline-warning\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.getPendingBorrowRequests().length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(ctx_r0.borrowView === \"current\" ? \"btn-primary\" : \"btn-outline-primary\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.borrowView === \"history\" ? \"btn-primary\" : \"btn-outline-primary\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.borrowView === \"pending\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.borrowView !== \"pending\");\n  }\n}\nfunction AdminDashboardComponent_div_67_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 146);\n    i0.ɵɵelement(1, \"i\", 191);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Aucun dispositif connect\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"small\");\n    i0.ɵɵtext(5, \"Connectez un Raspberry Pi pour commencer\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AdminDashboardComponent_div_67_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 192)(1, \"div\", 193)(2, \"div\")(3, \"strong\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵelementStart(6, \"small\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"span\", 138);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const device_r23 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(device_r23.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(device_r23.type);\n    i0.ɵɵadvance();\n    i0.ɵɵclassMap(device_r23.status === \"online\" ? \"bg-success\" : \"bg-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", device_r23.status, \" \");\n  }\n}\nfunction AdminDashboardComponent_div_67_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelement(1, \"i\", 174);\n    i0.ɵɵtext(2, \" Aucun scan effectu\\u00E9 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_67_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60)(1, \"div\", 40)(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 194);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const shelf_r24 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(shelf_r24.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", shelf_r24.detected_books, \" livres\");\n  }\n}\nfunction AdminDashboardComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 166);\n    i0.ɵɵelement(2, \"i\", 17);\n    i0.ɵɵelementStart(3, \"strong\");\n    i0.ɵɵtext(4, \"Fonctionnalit\\u00E9 IoT non configur\\u00E9e\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"br\");\n    i0.ɵɵtext(6, \" Connectez un Raspberry Pi avec lecteur RFID pour activer l'inventaire automatique. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 36)(8, \"div\", 49)(9, \"div\", 50)(10, \"div\", 51)(11, \"h5\");\n    i0.ɵɵelement(12, \"i\", 167);\n    i0.ɵɵtext(13, \" Devices IoT\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 39);\n    i0.ɵɵtemplate(15, AdminDashboardComponent_div_67_div_15_Template, 6, 0, \"div\", 135)(16, AdminDashboardComponent_div_67_div_16_Template, 10, 5, \"div\", 168);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"div\", 49)(18, \"div\", 50)(19, \"div\", 51)(20, \"h5\");\n    i0.ɵɵelement(21, \"i\", 169);\n    i0.ɵɵtext(22, \" Inventaire temps r\\u00E9el\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 39)(24, \"button\", 170);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_67_Template_button_click_24_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.startInventoryScan());\n    });\n    i0.ɵɵelement(25, \"i\", 171);\n    i0.ɵɵtext(26, \" Lancer scan manuel \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(27, AdminDashboardComponent_div_67_div_27_Template, 3, 0, \"div\", 172)(28, AdminDashboardComponent_div_67_div_28_Template, 6, 2, \"div\", 53);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(29, \"div\", 48)(30, \"div\", 173)(31, \"div\", 50)(32, \"div\", 51)(33, \"h5\");\n    i0.ɵɵelement(34, \"i\", 174);\n    i0.ɵɵtext(35, \" Qu'est-ce qu'un Raspberry Pi ?\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(36, \"div\", 39)(37, \"div\", 48)(38, \"div\", 80)(39, \"h6\");\n    i0.ɵɵtext(40, \"\\uD83D\\uDD0C Raspberry Pi - Mini-ordinateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"p\");\n    i0.ɵɵtext(42, \"Un \");\n    i0.ɵɵelementStart(43, \"strong\");\n    i0.ɵɵtext(44, \"Raspberry Pi\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(45, \" est un petit ordinateur de la taille d'une carte de cr\\u00E9dit qui co\\u00FBte environ \");\n    i0.ɵɵelementStart(46, \"strong\");\n    i0.ɵɵtext(47, \"35-50\\u20AC\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \".\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"h6\");\n    i0.ɵɵtext(50, \"\\uD83D\\uDCF6 Fonctionnalit\\u00E9 RFID pour Biblioth\\u00E8que\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(51, \"ul\")(52, \"li\")(53, \"strong\");\n    i0.ɵɵtext(54, \"Lecture automatique\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \" : Scanne les puces RFID coll\\u00E9es sur les livres\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(56, \"li\")(57, \"strong\");\n    i0.ɵɵtext(58, \"Inventaire temps r\\u00E9el\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59, \" : Compte automatiquement les livres sur les \\u00E9tag\\u00E8res\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(60, \"li\")(61, \"strong\");\n    i0.ɵɵtext(62, \"Localisation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(63, \" : Sait o\\u00F9 se trouve chaque livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(64, \"li\")(65, \"strong\");\n    i0.ɵɵtext(66, \"Emprunts rapides\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(67, \" : Scan instantan\\u00E9 sans saisie manuelle\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(68, \"h6\");\n    i0.ɵɵtext(69, \"\\uD83D\\uDECD\\uFE0F Mat\\u00E9riel N\\u00E9cessaire\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(70, \"ul\")(71, \"li\");\n    i0.ɵɵtext(72, \"Raspberry Pi 4 (50\\u20AC)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(73, \"li\");\n    i0.ɵɵtext(74, \"Lecteur RFID RC522 (10\\u20AC)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(75, \"li\");\n    i0.ɵɵtext(76, \"Puces RFID pour livres (0.50\\u20AC/pi\\u00E8ce)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(77, \"li\");\n    i0.ɵɵtext(78, \"C\\u00E2bles de connexion (5\\u20AC)\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(79, \"div\", 175)(80, \"strong\");\n    i0.ɵɵtext(81, \"\\uD83D\\uDCA1 Alternative Simple\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(82, \"br\");\n    i0.ɵɵtext(83, \" Vous pouvez utiliser eLibrary sans IoT ! L'inventaire manuel fonctionne tr\\u00E8s bien pour la plupart des biblioth\\u00E8ques. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(84, \"div\", 81)(85, \"div\", 176)(86, \"div\", 177);\n    i0.ɵɵelement(87, \"i\", 178);\n    i0.ɵɵelementStart(88, \"p\")(89, \"strong\");\n    i0.ɵɵtext(90, \"Raspberry Pi\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(91, \"div\", 177);\n    i0.ɵɵelement(92, \"i\", 179);\n    i0.ɵɵelementStart(93, \"p\")(94, \"strong\");\n    i0.ɵɵtext(95, \"Lecteur RFID\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(96, \"div\", 180);\n    i0.ɵɵelement(97, \"i\", 181);\n    i0.ɵɵelementStart(98, \"p\")(99, \"strong\");\n    i0.ɵɵtext(100, \"Puces RFID\");\n    i0.ɵɵelementEnd()()()()()();\n    i0.ɵɵelementStart(101, \"div\", 182)(102, \"h6\");\n    i0.ɵɵtext(103, \"\\uD83D\\uDE80 \\u00C9tapes d'Installation (Optionnel)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(104, \"div\", 48)(105, \"div\", 37)(106, \"div\", 183)(107, \"div\", 184);\n    i0.ɵɵtext(108, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(109, \"p\")(110, \"strong\");\n    i0.ɵɵtext(111, \"Achat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(112, \"br\");\n    i0.ɵɵtext(113, \"Commander le mat\\u00E9riel\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(114, \"div\", 37)(115, \"div\", 183)(116, \"div\", 184);\n    i0.ɵɵtext(117, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(118, \"p\")(119, \"strong\");\n    i0.ɵɵtext(120, \"Montage\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(121, \"br\");\n    i0.ɵɵtext(122, \"Connecter le lecteur RFID\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(123, \"div\", 37)(124, \"div\", 183)(125, \"div\", 184);\n    i0.ɵɵtext(126, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(127, \"p\")(128, \"strong\");\n    i0.ɵɵtext(129, \"Installation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(130, \"br\");\n    i0.ɵɵtext(131, \"Script Python fourni\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(132, \"div\", 37)(133, \"div\", 183)(134, \"div\", 185);\n    i0.ɵɵtext(135, \"4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(136, \"p\")(137, \"strong\");\n    i0.ɵɵtext(138, \"Activation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(139, \"br\");\n    i0.ɵɵtext(140, \"Inventaire automatique\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(141, \"div\", 186)(142, \"button\", 187);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_67_Template_button_click_142_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.simulateIoTSetup());\n    });\n    i0.ɵɵelement(143, \"i\", 188);\n    i0.ɵɵtext(144, \" Simuler Installation IoT \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(145, \"button\", 189);\n    i0.ɵɵelement(146, \"i\", 190);\n    i0.ɵɵtext(147, \" T\\u00E9l\\u00E9charger Guide Complet \");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.iotDevices.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.iotDevices);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.shelves.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.shelves);\n  }\n}\nfunction AdminDashboardComponent_div_68_div_8_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 195);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 196);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_68_div_8_tr_17_Template_button_click_13_listener() {\n      const overdue_r27 = i0.ɵɵrestoreView(_r26).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.applyPenalty(overdue_r27));\n    });\n    i0.ɵɵelement(14, \"i\", 197);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 198);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_68_div_8_tr_17_Template_button_click_15_listener() {\n      const overdue_r27 = i0.ɵɵrestoreView(_r26).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.sendReminder(overdue_r27.user_id));\n    });\n    i0.ɵɵelement(16, \"i\", 164);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 199);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_68_div_8_tr_17_Template_button_click_17_listener() {\n      const overdue_r27 = i0.ɵɵrestoreView(_r26).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r0.blacklistUser(overdue_r27.user_id));\n    });\n    i0.ɵɵelement(18, \"i\", 200);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const overdue_r27 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(overdue_r27.user_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(overdue_r27.book_title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 5, overdue_r27.due_date));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(overdue_r27.days_overdue);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", overdue_r27.penalty_amount, \" CFA\");\n  }\n}\nfunction AdminDashboardComponent_div_68_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 75)(1, \"table\", 76)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Date pr\\u00E9vue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Jours de retard\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Montant p\\u00E9nalit\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtemplate(17, AdminDashboardComponent_div_68_div_8_tr_17_Template, 19, 7, \"tr\", 78);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.overdueBorrows);\n  }\n}\nfunction AdminDashboardComponent_div_68_div_9_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 195);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const penalty_r28 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 5, penalty_r28.applied_date, \"short\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(penalty_r28.user_name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(penalty_r28.book_title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", penalty_r28.amount, \" CFA\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(penalty_r28.admin_name);\n  }\n}\nfunction AdminDashboardComponent_div_68_div_9_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 146)(1, \"p\", 7);\n    i0.ɵɵtext(2, \"Aucune p\\u00E9nalit\\u00E9 appliqu\\u00E9e pour le moment\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AdminDashboardComponent_div_68_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 75)(1, \"table\", 76)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Livre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Montant\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Appliqu\\u00E9 par\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, AdminDashboardComponent_div_68_div_9_tr_15_Template, 12, 8, \"tr\", 78);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(16, AdminDashboardComponent_div_68_div_9_div_16_Template, 3, 0, \"div\", 135);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.penaltyHistory);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.penaltyHistory.length === 0);\n  }\n}\nfunction AdminDashboardComponent_div_68_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 36)(2, \"div\", 49)(3, \"button\", 148);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_68_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.penaltyView = \"current\");\n    });\n    i0.ɵɵtext(4, \"Retards actuels\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 49)(6, \"button\", 148);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_68_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.penaltyView = \"history\");\n    });\n    i0.ɵɵtext(7, \"Historique p\\u00E9nalit\\u00E9s\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(8, AdminDashboardComponent_div_68_div_8_Template, 18, 1, \"div\", 151)(9, AdminDashboardComponent_div_68_div_9_Template, 17, 2, \"div\", 151);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.penaltyView === \"current\" ? \"btn-primary\" : \"btn-outline-primary\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.penaltyView === \"history\" ? \"btn-primary\" : \"btn-outline-primary\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.penaltyView === \"current\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.penaltyView === \"history\");\n  }\n}\nfunction AdminDashboardComponent_div_69_tr_18_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 208);\n    i0.ɵɵtext(1, \"Upload\\u00E9s\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_69_tr_18_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 153);\n    i0.ɵɵtext(1, \"Manquants\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_69_tr_18_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 209);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const request_r30 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"title\", \"Document demand\\u00E9: \" + request_r30.requested_document);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" En attente: \", request_r30.requested_document, \" \");\n  }\n}\nfunction AdminDashboardComponent_div_69_tr_18_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 152);\n    i0.ɵɵtext(1, \"!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminDashboardComponent_div_69_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtemplate(9, AdminDashboardComponent_div_69_tr_18_span_9_Template, 2, 0, \"span\", 201)(10, AdminDashboardComponent_div_69_tr_18_span_10_Template, 2, 0, \"span\", 202)(11, AdminDashboardComponent_div_69_tr_18_span_11_Template, 2, 2, \"span\", 203);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"span\", 153);\n    i0.ɵɵtext(14, \"En attente\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 204);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_69_tr_18_Template_button_click_16_listener() {\n      const request_r30 = i0.ɵɵrestoreView(_r29).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.viewRequestProfile(request_r30));\n    });\n    i0.ɵɵelement(17, \"i\", 90);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 205);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_69_tr_18_Template_button_click_18_listener() {\n      const request_r30 = i0.ɵɵrestoreView(_r29).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.approveRequest(request_r30.id));\n    });\n    i0.ɵɵelement(19, \"i\", 120);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 206);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_69_tr_18_Template_button_click_20_listener() {\n      const request_r30 = i0.ɵɵrestoreView(_r29).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.rejectRequest(request_r30.id));\n    });\n    i0.ɵɵelement(21, \"i\", 122);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 207);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_69_tr_18_Template_button_click_22_listener() {\n      const request_r30 = i0.ɵɵrestoreView(_r29).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r0.requestDocument(request_r30.id));\n    });\n    i0.ɵɵelement(23, \"i\", 22);\n    i0.ɵɵtemplate(24, AdminDashboardComponent_div_69_tr_18_span_24_Template, 2, 0, \"span\", 149);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const request_r30 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", request_r30.name, \" \", request_r30.surname, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r30.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 9, request_r30.created_at));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", request_r30.documents_uploaded);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !request_r30.documents_uploaded && !request_r30.requested_document);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !request_r30.documents_uploaded && request_r30.requested_document);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"title\", request_r30.requested_document ? \"Redemander un document\" : \"Demander justificatif\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", request_r30.requested_document);\n  }\n}\nfunction AdminDashboardComponent_div_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 75)(2, \"table\", 76)(3, \"thead\")(4, \"tr\")(5, \"th\");\n    i0.ɵɵtext(6, \"Nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Date demande\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Documents\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Statut\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Actions\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, AdminDashboardComponent_div_69_tr_18_Template, 25, 11, \"tr\", 78);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.registrationRequests);\n  }\n}\nfunction AdminDashboardComponent_div_70_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 36)(2, \"div\", 81)(3, \"div\", 50)(4, \"div\", 51)(5, \"h5\");\n    i0.ɵɵelement(6, \"i\", 210);\n    i0.ɵɵtext(7, \" Rapports PDF\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 39)(9, \"button\", 211);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_70_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.exportReport(\"top-books\"));\n    });\n    i0.ɵɵelement(10, \"i\", 212);\n    i0.ɵɵtext(11, \" Top Livres Populaires \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 213);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_70_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.exportReport(\"monthly-activity\"));\n    });\n    i0.ɵɵelement(13, \"i\", 214);\n    i0.ɵɵtext(14, \" Activit\\u00E9 Mensuelle \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 215);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_70_Template_button_click_15_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.exportReport(\"active-users\"));\n    });\n    i0.ɵɵelement(16, \"i\", 11);\n    i0.ɵɵtext(17, \" Utilisateurs Actifs \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 216);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_70_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.exportReport(\"iot-stats\"));\n    });\n    i0.ɵɵelement(19, \"i\", 217);\n    i0.ɵɵtext(20, \" Statistiques IoT \");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(21, \"div\", 80)(22, \"div\", 50)(23, \"div\", 51)(24, \"h5\");\n    i0.ɵɵelement(25, \"i\", 218);\n    i0.ɵɵtext(26, \" Graphiques d'Activit\\u00E9\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 39)(28, \"div\", 48)(29, \"div\", 49);\n    i0.ɵɵelement(30, \"canvas\", 219);\n    i0.ɵɵelementStart(31, \"p\", 220)(32, \"strong\");\n    i0.ɵɵtext(33, \"Emprunts par Mois\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"div\", 49);\n    i0.ɵɵelement(35, \"canvas\", 221);\n    i0.ɵɵelementStart(36, \"p\", 220)(37, \"strong\");\n    i0.ɵɵtext(38, \"Livres par Cat\\u00E9gorie\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(39, \"div\", 222)(40, \"div\", 49);\n    i0.ɵɵelement(41, \"canvas\", 223);\n    i0.ɵɵelementStart(42, \"p\", 220)(43, \"strong\");\n    i0.ɵɵtext(44, \"Utilisateurs Actifs\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(45, \"div\", 49);\n    i0.ɵɵelement(46, \"canvas\", 224);\n    i0.ɵɵelementStart(47, \"p\", 220)(48, \"strong\");\n    i0.ɵɵtext(49, \"Tendances\");\n    i0.ɵɵelementEnd()()()()()()()()();\n  }\n}\nfunction AdminDashboardComponent_div_71_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 48)(2, \"div\", 49)(3, \"div\", 50)(4, \"div\", 51)(5, \"h5\");\n    i0.ɵɵtext(6, \"Param\\u00E8tres syst\\u00E8me\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 39)(8, \"div\", 99)(9, \"label\", 100);\n    i0.ɵɵtext(10, \"Dur\\u00E9e d'emprunt par d\\u00E9faut (jours)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 225);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_71_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.settings.default_borrow_days, $event) || (ctx_r0.settings.default_borrow_days = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 99)(13, \"label\", 100);\n    i0.ɵɵtext(14, \"P\\u00E9nalit\\u00E9 par jour (CFA)\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"input\", 226);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_71_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.settings.penalty_per_day, $event) || (ctx_r0.settings.penalty_per_day = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"button\", 74);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_71_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.saveSystemSettings());\n    });\n    i0.ɵɵtext(17, \"Sauvegarder\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(18, \"div\", 49)(19, \"div\", 50)(20, \"div\", 51)(21, \"h5\");\n    i0.ɵɵtext(22, \"Param\\u00E8tres IoT\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 39)(24, \"div\", 99)(25, \"label\", 100);\n    i0.ɵɵtext(26, \"MQTT Broker\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"input\", 227);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_71_Template_input_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.settings.mqtt_broker, $event) || (ctx_r0.settings.mqtt_broker = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(28, \"div\", 99)(29, \"label\", 100);\n    i0.ɵɵtext(30, \"Topic RFID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"input\", 228);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_71_Template_input_ngModelChange_31_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.settings.rfid_topic, $event) || (ctx_r0.settings.rfid_topic = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(32, \"button\", 74);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_71_Template_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.saveIoTSettings());\n    });\n    i0.ɵɵtext(33, \"Sauvegarder\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.settings.default_borrow_days);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.settings.penalty_per_day);\n    i0.ɵɵadvance(12);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.settings.mqtt_broker);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.settings.rfid_topic);\n  }\n}\nfunction AdminDashboardComponent_div_72_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 233);\n    i0.ɵɵelement(1, \"i\", 234);\n    i0.ɵɵelementStart(2, \"p\", 7);\n    i0.ɵɵtext(3, \"Aucune activit\\u00E9 enregistr\\u00E9e\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"small\");\n    i0.ɵɵtext(5, \"Les logs apparaissent quand vous ajoutez des livres, utilisateurs ou emprunts\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction AdminDashboardComponent_div_72_div_16_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\")(5, \"span\", 138);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const log_r34 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 7, log_r34.created_at, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵclassMap(ctx_r0.getLogTypeClass(log_r34.type));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(log_r34.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r34.user_name || \"Syst\\u00E8me\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r34.action);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(log_r34.details);\n  }\n}\nfunction AdminDashboardComponent_div_72_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 75)(1, \"table\", 76)(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Date/Heure\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"D\\u00E9tails\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, AdminDashboardComponent_div_72_div_16_tr_15_Template, 13, 10, \"tr\", 78);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.filteredLogs);\n  }\n}\nfunction AdminDashboardComponent_div_72_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 65)(2, \"div\", 66)(3, \"input\", 229);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_72_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.logSearch, $event) || (ctx_r0.logSearch = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"input\", function AdminDashboardComponent_div_72_Template_input_input_3_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.filterLogs());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 68);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AdminDashboardComponent_div_72_Template_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r0 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r0.logTypeFilter, $event) || (ctx_r0.logTypeFilter = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"change\", function AdminDashboardComponent_div_72_Template_select_change_4_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.filterLogs());\n    });\n    i0.ɵɵelementStart(5, \"option\", 69);\n    i0.ɵɵtext(6, \"Tous types\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"option\", 131);\n    i0.ɵɵtext(8, \"Actions admin\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 130);\n    i0.ɵɵtext(10, \"Actions utilisateur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 230);\n    i0.ɵɵtext(12, \"Syst\\u00E8me\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"button\", 231);\n    i0.ɵɵlistener(\"click\", function AdminDashboardComponent_div_72_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.exportLogs());\n    });\n    i0.ɵɵtext(14, \"Export logs\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, AdminDashboardComponent_div_72_div_15_Template, 6, 0, \"div\", 232)(16, AdminDashboardComponent_div_72_div_16_Template, 16, 1, \"div\", 151);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.logSearch);\n    i0.ɵɵadvance();\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r0.logTypeFilter);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.filteredLogs.length === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.filteredLogs.length > 0);\n  }\n}\nexport let AdminDashboardComponent = /*#__PURE__*/(() => {\n  class AdminDashboardComponent {\n    constructor(apiService, authService, router, pdfService) {\n      this.apiService = apiService;\n      this.authService = authService;\n      this.router = router;\n      this.pdfService = pdfService;\n      this.activeTab = 'dashboard';\n      this.stats = null;\n      this.books = [];\n      this.filteredBooks = [];\n      this.categories = [];\n      this.borrows = [];\n      this.users = [];\n      this.overdueBorrows = [];\n      this.penaltyHistory = [];\n      this.registrationRequests = [];\n      this.auditLogs = [];\n      this.filteredLogs = [];\n      this.iotDevices = [];\n      this.shelves = [];\n      this.viewedNotifications = new Set();\n      this.alertDismissed = false;\n      this.showAddBookForm = false;\n      this.showAddCategoryForm = false;\n      this.newBook = {};\n      this.newCategory = {};\n      this.currentUser = this.authService.getCurrentUser();\n      // Filtres\n      this.bookSearch = '';\n      this.bookCategoryFilter = '';\n      this.bookAvailabilityFilter = '';\n      this.userSearch = '';\n      this.userRoleFilter = '';\n      this.userStatusFilter = '';\n      this.borrowView = 'current';\n      this.penaltyView = 'current';\n      this.selectedBooks = [];\n      this.logSearch = '';\n      this.logTypeFilter = '';\n      // Paramètres\n      this.settings = {\n        default_borrow_days: 14,\n        penalty_per_day: 300,\n        mqtt_broker: 'localhost:1883',\n        rfid_topic: 'library/rfid'\n      };\n    }\n    ngOnInit() {\n      this.loadStats();\n      this.loadBooks();\n      this.loadCategories();\n      this.loadBorrows();\n      this.loadUsers();\n      this.loadOverdueBorrows();\n      this.loadRegistrationRequests();\n      this.loadAuditLogs();\n      this.loadIoTDevices();\n      this.loadShelves();\n      // Écouter les mises à jour de statut utilisateur\n      window.addEventListener('userStatusUpdated', event => {\n        this.currentUser = event.detail;\n      });\n      // Vérifier périodiquement les nouvelles demandes\n      setInterval(() => {\n        this.loadRegistrationRequests();\n      }, 30000);\n      // Initialiser les graphiques après le chargement\n      setTimeout(() => {\n        this.initCharts();\n      }, 1000);\n    }\n    initCharts() {\n      if (typeof document !== 'undefined') {\n        this.createBorrowsChart();\n        this.createCategoriesChart();\n        this.createUsersChart();\n        this.createTrendsChart();\n      }\n    }\n    createBorrowsChart() {\n      const canvas = document.getElementById('borrowsChart');\n      if (!canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      // Emprunts par mois (6 derniers mois)\n      const monthlyData = this.getMonthlyLoansData();\n      const maxValue = Math.max(...monthlyData.values, 1);\n      ctx.fillStyle = '#007bff';\n      ctx.font = '10px Arial';\n      for (let i = 0; i < monthlyData.values.length; i++) {\n        const barHeight = monthlyData.values[i] / maxValue * 150;\n        const x = i * 45 + 20;\n        const y = 180 - barHeight;\n        ctx.fillRect(x, y, 35, barHeight);\n        ctx.fillStyle = '#333';\n        ctx.fillText(monthlyData.labels[i], x, 195);\n        ctx.fillText(monthlyData.values[i].toString(), x + 10, y - 5);\n        ctx.fillStyle = '#007bff';\n      }\n    }\n    getMonthlyLoansData() {\n      const months = [];\n      const values = [];\n      const now = new Date();\n      for (let i = 5; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        const monthName = date.toLocaleDateString('fr-FR', {\n          month: 'short'\n        });\n        months.push(monthName);\n        // Compter les emprunts de ce mois\n        const loansInMonth = this.borrows.filter(loan => {\n          const loanDate = new Date(loan.created_at || loan.loan_date);\n          return loanDate.getMonth() === date.getMonth() && loanDate.getFullYear() === date.getFullYear();\n        }).length;\n        values.push(loansInMonth);\n      }\n      return {\n        labels: months,\n        values\n      };\n    }\n    createCategoriesChart() {\n      const canvas = document.getElementById('categoriesChart');\n      if (!canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      if (this.categories.length === 0) {\n        ctx.fillStyle = '#666';\n        ctx.font = '14px Arial';\n        ctx.fillText('Aucune catégorie', 100, 100);\n        return;\n      }\n      const colors = ['#007bff', '#28a745', '#ffc107', '#dc3545', '#6f42c1'];\n      const total = this.categories.length;\n      let currentAngle = 0;\n      const centerX = 150;\n      const centerY = 100;\n      const radius = 80;\n      for (let i = 0; i < this.categories.length; i++) {\n        const percentage = 1 / total * 100;\n        const sliceAngle = percentage / 100 * 2 * Math.PI;\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY);\n        ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);\n        ctx.closePath();\n        ctx.fillStyle = colors[i % colors.length];\n        ctx.fill();\n        // Légende\n        ctx.fillStyle = colors[i % colors.length];\n        ctx.fillRect(20, 20 + i * 20, 15, 15);\n        ctx.fillStyle = '#333';\n        ctx.font = '10px Arial';\n        ctx.fillText(`${this.categories[i].name}`, 40, 32 + i * 20);\n        currentAngle += sliceAngle;\n      }\n    }\n    createUsersChart() {\n      const canvas = document.getElementById('usersChart');\n      if (!canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      // Croissance des utilisateurs (6 derniers mois)\n      const userGrowthData = this.getUserGrowthData();\n      const maxValue = Math.max(...userGrowthData.values, 1);\n      ctx.strokeStyle = '#28a745';\n      ctx.lineWidth = 3;\n      ctx.beginPath();\n      for (let i = 0; i < userGrowthData.values.length; i++) {\n        const x = i * 50 + 30;\n        const y = 180 - userGrowthData.values[i] / maxValue * 150;\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n        // Points\n        ctx.fillStyle = '#28a745';\n        ctx.beginPath();\n        ctx.arc(x, y, 4, 0, 2 * Math.PI);\n        ctx.fill();\n        // Valeurs\n        ctx.fillStyle = '#333';\n        ctx.font = '10px Arial';\n        ctx.fillText(userGrowthData.values[i].toString(), x - 5, y - 10);\n      }\n      ctx.strokeStyle = '#28a745';\n      ctx.stroke();\n    }\n    getUserGrowthData() {\n      const months = [];\n      const values = [];\n      const now = new Date();\n      let cumulativeUsers = 0;\n      for (let i = 5; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        const monthName = date.toLocaleDateString('fr-FR', {\n          month: 'short'\n        });\n        months.push(monthName);\n        // Compter les nouveaux utilisateurs de ce mois\n        const newUsersInMonth = this.users.filter(user => {\n          const userDate = new Date(user.created_at);\n          return userDate.getMonth() === date.getMonth() && userDate.getFullYear() === date.getFullYear();\n        }).length;\n        cumulativeUsers += newUsersInMonth;\n        values.push(cumulativeUsers);\n      }\n      return {\n        labels: months,\n        values\n      };\n    }\n    createTrendsChart() {\n      const canvas = document.getElementById('trendsChart');\n      if (!canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      // Tendances emprunts vs retours\n      const trendsData = this.getTrendsData();\n      const maxValue = Math.max(...trendsData.emprunts, ...trendsData.retours, 1);\n      // Ligne emprunts\n      ctx.strokeStyle = '#007bff';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      for (let i = 0; i < trendsData.emprunts.length; i++) {\n        const x = i * 45 + 30;\n        const y = 180 - trendsData.emprunts[i] / maxValue * 150;\n        if (i === 0) ctx.moveTo(x, y);else ctx.lineTo(x, y);\n      }\n      ctx.stroke();\n      // Ligne retours\n      ctx.strokeStyle = '#28a745';\n      ctx.beginPath();\n      for (let i = 0; i < trendsData.retours.length; i++) {\n        const x = i * 45 + 30;\n        const y = 180 - trendsData.retours[i] / maxValue * 150;\n        if (i === 0) ctx.moveTo(x, y);else ctx.lineTo(x, y);\n      }\n      ctx.stroke();\n      // Légende\n      ctx.fillStyle = '#007bff';\n      ctx.fillRect(20, 20, 15, 3);\n      ctx.fillStyle = '#333';\n      ctx.font = '12px Arial';\n      ctx.fillText('Emprunts', 40, 30);\n      ctx.fillStyle = '#28a745';\n      ctx.fillRect(20, 35, 15, 3);\n      ctx.fillText('Retours', 40, 45);\n    }\n    getTrendsData() {\n      const emprunts = [];\n      const retours = [];\n      const now = new Date();\n      for (let i = 5; i >= 0; i--) {\n        const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n        // Emprunts du mois\n        const monthLoans = this.borrows.filter(loan => {\n          const loanDate = new Date(loan.created_at || loan.loan_date);\n          return loanDate.getMonth() === date.getMonth() && loanDate.getFullYear() === date.getFullYear();\n        }).length;\n        // Retours du mois\n        const monthReturns = this.borrows.filter(loan => {\n          const returnDate = new Date(loan.return_date || loan.updated_at);\n          return loan.status === 'returned' && returnDate.getMonth() === date.getMonth() && returnDate.getFullYear() === date.getFullYear();\n        }).length;\n        emprunts.push(monthLoans);\n        retours.push(monthReturns);\n      }\n      return {\n        emprunts,\n        retours\n      };\n    }\n    setActiveTab(tab) {\n      this.activeTab = tab;\n      if (tab === 'reports') {\n        setTimeout(() => this.initCharts(), 100);\n      }\n    }\n    refreshCharts() {\n      if (this.activeTab === 'reports') {\n        setTimeout(() => this.initCharts(), 100);\n      }\n    }\n    getTabTitle() {\n      const titles = {\n        'dashboard': 'Tableau de bord',\n        'users': 'Utilisateurs',\n        'borrows': 'Emprunts',\n        'books': 'Livres / Catalogue',\n        'inventory': 'Inventaire (IoT)',\n        'overdue': 'Retards & Pénalités',\n        'requests': 'Demandes / Inscriptions',\n        'reports': 'Statistiques & Rapports',\n        'settings': 'Configuration / Paramètres',\n        'logs': 'Logs / Audit'\n      };\n      return titles[this.activeTab] || this.activeTab;\n    }\n    loadStats() {\n      this.apiService.getDashboardStats().subscribe({\n        next: data => {\n          this.stats = {\n            stats: {\n              total_books: data.stats?.total_books || 0,\n              total_users: data.stats?.total_users || 0,\n              active_borrows: data.stats?.active_loans || 0,\n              overdue_borrows: data.stats?.overdue_loans || 0\n            },\n            popular_books: data.popular_books || [],\n            recent_borrows: data.recent_loans || []\n          };\n        },\n        error: error => {\n          console.error('Erreur stats:', error);\n          this.stats = {\n            stats: {\n              total_books: 0,\n              total_users: 0,\n              active_borrows: 0,\n              overdue_borrows: 0\n            },\n            popular_books: [],\n            recent_borrows: []\n          };\n        }\n      });\n    }\n    loadBooks() {\n      // Charger les livres depuis localStorage\n      const storedBooks = localStorage.getItem('adminBooks');\n      if (storedBooks) {\n        this.books = JSON.parse(storedBooks);\n      } else {\n        this.books = [];\n      }\n      this.filteredBooks = this.books;\n    }\n    loadCategories() {\n      // Charger les catégories depuis localStorage ou créer des catégories par défaut\n      const storedCategories = localStorage.getItem('categories');\n      if (storedCategories) {\n        this.categories = JSON.parse(storedCategories);\n      } else {\n        // Créer des catégories par défaut\n        this.categories = [{\n          id: 1,\n          name: 'Fiction',\n          description: 'Romans et nouvelles'\n        }, {\n          id: 2,\n          name: 'Science-Fiction',\n          description: 'Science-fiction et fantasy'\n        }, {\n          id: 3,\n          name: 'Histoire',\n          description: 'Livres d\\'histoire'\n        }, {\n          id: 4,\n          name: 'Philosophie',\n          description: 'Ouvrages philosophiques'\n        }, {\n          id: 5,\n          name: 'Informatique',\n          description: 'Livres techniques'\n        }, {\n          id: 6,\n          name: 'Romance',\n          description: 'Romans d\\'amour'\n        }, {\n          id: 7,\n          name: 'Thriller',\n          description: 'Suspense et thriller'\n        }, {\n          id: 8,\n          name: 'Biographie',\n          description: 'Biographies et autobiographies'\n        }, {\n          id: 9,\n          name: 'Jeunesse',\n          description: 'Livres pour enfants et adolescents'\n        }, {\n          id: 10,\n          name: 'Essais',\n          description: 'Essais et analyses'\n        }];\n        localStorage.setItem('categories', JSON.stringify(this.categories));\n      }\n    }\n    loadBorrows() {\n      // Charger les emprunts depuis localStorage\n      const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]');\n      const localBorrows = JSON.parse(localStorage.getItem('borrows') || '[]');\n      // Combiner tous les emprunts\n      this.borrows = [...localBorrows, ...borrowRequests];\n      // Fallback API si pas de données locales\n      if (this.borrows.length === 0) {\n        this.apiService.getAllBorrows().subscribe({\n          next: data => this.borrows = data || [],\n          error: error => console.error('Erreur emprunts:', error)\n        });\n      }\n    }\n    onBookCoverSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.newBook.cover_file = file;\n        this.newBook.cover_preview = URL.createObjectURL(file);\n      }\n    }\n    addBook() {\n      if (this.newBook.title && this.newBook.author && this.newBook.isbn && this.newBook.category_id && this.newBook.stock) {\n        const categoryName = this.categories.find(c => c.id == this.newBook.category_id)?.name || 'Fiction';\n        const newBookData = {\n          id: Date.now(),\n          title: this.newBook.title,\n          author: this.newBook.author,\n          isbn: this.newBook.isbn,\n          category_id: this.newBook.category_id,\n          category: {\n            name: categoryName\n          },\n          stock: this.newBook.stock,\n          available: this.newBook.stock,\n          description: this.newBook.description || 'Aucune description disponible.',\n          cover_url: this.newBook.cover_preview || this.getDefaultBookImage(categoryName),\n          times_borrowed: 0,\n          created_at: new Date()\n        };\n        this.books.push(newBookData);\n        this.filteredBooks = [...this.books];\n        // Sauvegarder dans localStorage pour que les utilisateurs puissent voir les livres\n        localStorage.setItem('adminBooks', JSON.stringify(this.books));\n        // Mettre à jour les logs et graphiques\n        this.loadAuditLogs();\n        this.refreshCharts();\n        alert('Livre ajouté avec succès!');\n        this.cancelAddBook();\n      } else {\n        alert('Veuillez remplir tous les champs obligatoires');\n      }\n    }\n    getDefaultBookImage(categoryName) {\n      const images = {\n        'Fiction': 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=300&h=400&fit=crop',\n        'Science-Fiction': 'https://images.unsplash.com/photo-1589998059171-988d887df646?w=300&h=400&fit=crop',\n        'Histoire': 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=400&fit=crop',\n        'Philosophie': 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=400&fit=crop',\n        'Informatique': 'https://images.unsplash.com/photo-1516979187457-637abb4f9353?w=300&h=400&fit=crop',\n        'Romance': 'https://images.unsplash.com/photo-1474552226712-ac0f0961a954?w=300&h=400&fit=crop',\n        'Thriller': 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=400&fit=crop',\n        'Biographie': 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=400&fit=crop',\n        'Jeunesse': 'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=300&h=400&fit=crop',\n        'Essais': 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300&h=400&fit=crop'\n      };\n      return images[categoryName] || 'https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=300&h=400&fit=crop';\n    }\n    cancelAddBook() {\n      this.showAddBookForm = false;\n      this.showAddCategoryForm = false;\n      this.newBook = {};\n      this.newCategory = {};\n    }\n    addNewCategory() {\n      if (this.newCategory.name) {\n        const newCategoryData = {\n          id: Date.now(),\n          name: this.newCategory.name,\n          description: this.newCategory.description,\n          created_at: new Date()\n        };\n        this.categories.push(newCategoryData);\n        // Sauvegarder dans localStorage\n        localStorage.setItem('categories', JSON.stringify(this.categories));\n        this.newBook.category_id = newCategoryData.id;\n        this.showAddCategoryForm = false;\n        this.newCategory = {};\n        // Mettre à jour les graphiques\n        this.refreshCharts();\n        alert('Catégorie ajoutée avec succès!');\n      }\n    }\n    returnBook(borrowId) {\n      if (confirm('Marquer ce livre comme retourné ?')) {\n        // Mettre à jour dans localStorage\n        const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]');\n        const localBorrows = JSON.parse(localStorage.getItem('borrows') || '[]');\n        // Chercher dans les demandes d'emprunt\n        const requestIndex = borrowRequests.findIndex(req => req.id === borrowId);\n        if (requestIndex !== -1) {\n          borrowRequests[requestIndex].status = 'returned';\n          borrowRequests[requestIndex].return_date = new Date().toISOString();\n          localStorage.setItem('borrowRequests', JSON.stringify(borrowRequests));\n        }\n        // Chercher dans les emprunts locaux\n        const borrowIndex = localBorrows.findIndex(borrow => borrow.id === borrowId);\n        if (borrowIndex !== -1) {\n          localBorrows[borrowIndex].status = 'returned';\n          localBorrows[borrowIndex].return_date = new Date().toISOString();\n          localStorage.setItem('borrows', JSON.stringify(localBorrows));\n        }\n        // Recharger les données\n        this.loadBorrows();\n        this.loadStats();\n        alert('Livre marqué comme retourné avec succès!');\n        // Fallback API\n        this.apiService.returnBook(borrowId).subscribe({\n          next: () => console.log('Retour synchronisé avec API'),\n          error: error => console.error('Erreur sync API:', error)\n        });\n      }\n    }\n    getStatusLabel(status) {\n      const labels = {\n        'active': 'Actif',\n        'approved': 'Certifié',\n        'pending': 'En attente',\n        'suspended': 'Suspendu',\n        'returned': 'Retourné',\n        'overdue': 'En Retard',\n        'rejected': 'Rejeté'\n      };\n      return labels[status] || status;\n    }\n    loadUsers() {\n      // Charger les utilisateurs certifiés depuis localStorage\n      const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');\n      // Filtrer seulement les utilisateurs certifiés (approved)\n      this.users = registeredUsers.filter(user => user.status === 'approved');\n      // Fallback API si pas de données locales\n      if (this.users.length === 0) {\n        this.apiService.getUsers().subscribe({\n          next: data => this.users = data || [],\n          error: error => {\n            console.error('Erreur utilisateurs:', error);\n            this.users = [];\n          }\n        });\n      }\n    }\n    loadOverdueBorrows() {\n      this.apiService.getOverdueLoans().subscribe({\n        next: data => this.overdueBorrows = data || [],\n        error: error => {\n          console.error('Erreur retards:', error);\n          this.overdueBorrows = [];\n        }\n      });\n    }\n    loadRegistrationRequests() {\n      const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n      this.registrationRequests = storedRequests;\n    }\n    loadAuditLogs() {\n      // Générer des logs basés sur les vraies activités\n      this.auditLogs = [];\n      // Logs pour chaque livre ajouté\n      this.books.forEach(book => {\n        this.auditLogs.push({\n          created_at: book.created_at || new Date(),\n          type: 'admin',\n          user_name: 'Admin',\n          action: 'Ajout livre',\n          details: `Livre ajouté: ${book.title} par ${book.author}`\n        });\n      });\n      // Logs pour chaque utilisateur\n      this.users.forEach(user => {\n        this.auditLogs.push({\n          created_at: user.created_at || new Date(),\n          type: 'system',\n          user_name: 'Système',\n          action: 'Inscription utilisateur',\n          details: `Nouvel utilisateur: ${user.name} (${user.email})`\n        });\n      });\n      // Logs pour chaque emprunt\n      this.borrows.forEach(borrow => {\n        this.auditLogs.push({\n          created_at: borrow.created_at || new Date(),\n          type: 'user',\n          user_name: borrow.user_name || 'Utilisateur',\n          action: 'Emprunt livre',\n          details: `Emprunt: ${borrow.book_title || 'Livre'}`\n        });\n      });\n      // Trier par date décroissante\n      this.auditLogs.sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());\n      // Initialiser les logs filtrés\n      this.filteredLogs = [...this.auditLogs];\n    }\n    loadIoTDevices() {\n      this.iotDevices = [];\n    }\n    loadShelves() {\n      this.shelves = [];\n    }\n    sendReminder(userId) {\n      this.apiService.sendReminder(userId).subscribe({\n        next: () => {\n          alert('Rappel envoyé avec succès!');\n        },\n        error: error => console.error('Erreur rappel:', error)\n      });\n    }\n    // Méthodes pour les livres\n    searchBooks() {\n      this.filterBooks();\n    }\n    filterBooks() {\n      this.filteredBooks = this.books.filter(book => {\n        const matchesSearch = !this.bookSearch || book.title.toLowerCase().includes(this.bookSearch.toLowerCase()) || book.author.toLowerCase().includes(this.bookSearch.toLowerCase()) || book.isbn.includes(this.bookSearch);\n        const matchesCategory = !this.bookCategoryFilter || book.category_id == this.bookCategoryFilter;\n        const matchesAvailability = !this.bookAvailabilityFilter || this.bookAvailabilityFilter === '1' && book.stock > 0 || this.bookAvailabilityFilter === '0' && book.stock <= 0;\n        return matchesSearch && matchesCategory && matchesAvailability;\n      });\n    }\n    selectAllBooks(event) {\n      if (event.target.checked) {\n        this.selectedBooks = this.filteredBooks.map(book => book.id);\n      } else {\n        this.selectedBooks = [];\n      }\n    }\n    toggleBookSelection(bookId, event) {\n      if (event.target.checked) {\n        this.selectedBooks.push(bookId);\n      } else {\n        this.selectedBooks = this.selectedBooks.filter(id => id !== bookId);\n      }\n    }\n    viewBook(book) {\n      const description = book.description || 'Aucune description disponible.';\n      alert(`📚 DÉTAILS DU LIVRE\\n\\n📖 Titre: ${book.title}\\n✍️ Auteur: ${book.author}\\n🏷️ ISBN: ${book.isbn}\\n📂 Catégorie: ${book.category?.name || 'Non définie'}\\n📦 Stock: ${book.available || 0}/${book.stock}\\n📊 Emprunts: ${book.times_borrowed || 0}\\n\\n📝 DESCRIPTION:\\n${description}`);\n    }\n    editBook(book) {\n      const newTitle = prompt('Nouveau titre:', book.title);\n      if (newTitle && newTitle !== book.title) {\n        book.title = newTitle;\n        alert('Livre modifié avec succès!');\n      }\n    }\n    assignTag(book) {\n      const tagUid = prompt('Entrez l\\'UID du tag RFID:', book.tag_uid || '');\n      if (tagUid) {\n        book.tag_uid = tagUid;\n        alert('Tag assigné avec succès!');\n      }\n    }\n    confirmDeleteBook(book) {\n      if (confirm(`Supprimer \"${book.title}\" ?\\nCette action est irréversible.`)) {\n        this.books = this.books.filter(b => b.id !== book.id);\n        this.filteredBooks = this.filteredBooks.filter(b => b.id !== book.id);\n        alert('Livre supprimé avec succès!');\n      }\n    }\n    exportBooks() {\n      const csvContent = 'Titre,Auteur,ISBN,Catégorie,Stock\\n' + this.filteredBooks.map(book => `\"${book.title}\",\"${book.author}\",\"${book.isbn}\",\"${book.category?.name || ''}\",\"${book.stock}\"`).join('\\n');\n      const blob = new Blob([csvContent], {\n        type: 'text/csv'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'livres_export.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n      alert('Export CSV téléchargé avec succès!');\n    }\n    // Méthodes IoT\n    startInventoryScan() {\n      if (this.iotDevices.length === 0) {\n        alert('❌ Aucun dispositif IoT connecté\\n\\nPour utiliser cette fonctionnalité:\\n1. Achetez un Raspberry Pi (50€)\\n2. Connectez un lecteur RFID\\n3. Installez le script Python\\n4. Collez des puces RFID sur vos livres');\n        return;\n      }\n      alert('🔄 Scan d\\'inventaire démarré...\\n\\nRecherche des tags RFID en cours...');\n      setTimeout(() => {\n        const scannedBooks = this.books.length; // Utiliser le vrai nombre de livres\n        alert(`✅ Scan terminé!\\n\\n📚 ${scannedBooks} livres détectés\\n📍 Localisation mise à jour`);\n        this.shelves = [{\n          name: 'Rayon A1',\n          detected_books: Math.floor(scannedBooks / 2)\n        }, {\n          name: 'Rayon A2',\n          detected_books: Math.ceil(scannedBooks / 2)\n        }];\n      }, 2000);\n    }\n    simulateIoTSetup() {\n      if (confirm('🤖 Simuler l\\'installation IoT?\\n\\nCela va créer des dispositifs virtuels pour tester.')) {\n        this.iotDevices = [{\n          name: 'Raspberry Pi Virtuel',\n          type: 'RFID Reader',\n          status: 'online'\n        }, {\n          name: 'Kiosk Simulation',\n          type: 'Self-service',\n          status: 'online'\n        }];\n        alert('✅ Dispositifs IoT virtuels créés!\\n\\nVous pouvez maintenant tester le scan d\\'inventaire.');\n      }\n    }\n    // Méthodes rapports\n    exportReport(type) {\n      const reports = {\n        'top-books': 'Top 10 des Livres les Plus Empruntés',\n        'monthly-activity': 'Rapport d\\'Activité Mensuelle',\n        'active-users': 'Liste des Utilisateurs Actifs',\n        'iot-stats': 'Statistiques des Dispositifs IoT'\n      };\n      const htmlContent = this.generateSpecializedPDF(type, reports[type]);\n      const filename = `eLibrary_${type}_${new Date().toISOString().split('T')[0]}.pdf`;\n      this.pdfService.generatePDF(htmlContent, filename);\n      alert(`📄 Rapport PDF prêt!\\n\\nCliquez sur \"Télécharger PDF\" dans la nouvelle fenêtre\\nou utilisez Ctrl+P pour enregistrer.`);\n    }\n    generateSpecializedPDF(type, title) {\n      const date = new Date().toLocaleDateString('fr-FR');\n      const time = new Date().toLocaleTimeString('fr-FR');\n      const reportTitles = {\n        'top-books': 'Top 10 des Livres les Plus Empruntés',\n        'monthly-activity': 'Rapport d\\'Activité Mensuelle',\n        'active-users': 'Liste des Utilisateurs Actifs',\n        'iot-stats': 'Statistiques des Dispositifs IoT'\n      };\n      const reportContent = this.getReportContent(type);\n      return `\n<div style=\"font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px;\">\n    <div style=\"text-align: center; background: linear-gradient(135deg, #007bff, #0056b3); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px;\">\n        <div style=\"font-size: 48px; margin-bottom: 10px;\">📚</div>\n        <div style=\"font-size: 28px; font-weight: bold; margin-bottom: 10px;\">eLibrary</div>\n        <div style=\"font-size: 18px; opacity: 0.9;\">${reportTitles[type]}</div>\n        <div style=\"font-size: 14px; margin-top: 15px; opacity: 0.8;\">Généré le ${date} à ${time}</div>\n    </div>\n    \n    <div style=\"background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);\">\n        ${reportContent}\n    </div>\n    \n    <div style=\"text-align: center; margin-top: 40px; padding: 20px; color: #6c757d; border-top: 1px solid #dee2e6;\">\n        <p><strong>eLibrary</strong> - Système de Gestion de Bibliothèque</p>\n        <p>Rapport confidentiel généré automatiquement</p>\n    </div>\n</div>`;\n    }\n    getReportContent(type) {\n      const totalBooks = this.books.length;\n      const totalUsers = this.users.length;\n      const totalLoans = this.borrows.length;\n      switch (type) {\n        case 'top-books':\n          const booksWithLoans = this.books.map(book => ({\n            ...book,\n            loan_count: this.borrows.filter(loan => loan.book_id === book.id).length\n          })).sort((a, b) => b.loan_count - a.loan_count).slice(0, 5);\n          let booksTable = '';\n          if (booksWithLoans.length === 0) {\n            booksTable = '<tr><td colspan=\"6\" style=\"padding: 12px; border-bottom: 1px solid #dee2e6; text-align: center;\">Aucun livre avec emprunts</td></tr>';\n          } else {\n            booksTable = booksWithLoans.map((book, index) => `<tr style=\"${index % 2 === 0 ? 'background: #f8f9fa;' : ''}\"><td style=\"padding: 12px; border-bottom: 1px solid #dee2e6;\">${index === 0 ? '🥇' : index === 1 ? '🥈' : index === 2 ? '🥉' : ''} ${index + 1}</td><td style=\"padding: 12px; border-bottom: 1px solid #dee2e6;\">${book.title}</td><td style=\"padding: 12px; border-bottom: 1px solid #dee2e6;\">${book.author}</td><td style=\"padding: 12px; border-bottom: 1px solid #dee2e6;\">${book.category?.name || 'N/A'}</td><td style=\"padding: 12px; border-bottom: 1px solid #dee2e6;\">${book.loan_count}</td><td style=\"padding: 12px; border-bottom: 1px solid #dee2e6;\">${totalLoans > 0 ? Math.round(book.loan_count / totalLoans * 100) : 0}%</td></tr>`).join('');\n          }\n          return `\n        <div style=\"background: #fff3cd; padding: 15px; border-radius: 5px; border-left: 4px solid #ffc107; margin: 20px 0;\">\n            <strong>📊 Analyse des Emprunts</strong><br>\n            Ce rapport présente les livres les plus populaires basé sur les vraies données.\n        </div>\n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;\">\n            <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid #007bff;\">\n                <div style=\"font-size: 32px; font-weight: bold; color: #007bff;\">${totalLoans}</div>\n                <div style=\"color: #6c757d; font-size: 14px;\">Total Emprunts</div>\n            </div>\n            <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid #007bff;\">\n                <div style=\"font-size: 32px; font-weight: bold; color: #007bff;\">${totalBooks}</div>\n                <div style=\"color: #6c757d; font-size: 14px;\">Livres Différents</div>\n            </div>\n            <div style=\"background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; border-left: 4px solid #007bff;\">\n                <div style=\"font-size: 32px; font-weight: bold; color: #007bff;\">${totalBooks > 0 ? (totalLoans / totalBooks).toFixed(1) : 0}</div>\n                <div style=\"color: #6c757d; font-size: 14px;\">Emprunts/Livre</div>\n            </div>\n        </div>\n        <table style=\"width: 100%; border-collapse: collapse; margin: 20px 0;\">\n            <tr><th style=\"background: #007bff; color: white; padding: 12px; text-align: left;\">Rang</th><th style=\"background: #007bff; color: white; padding: 12px; text-align: left;\">Titre</th><th style=\"background: #007bff; color: white; padding: 12px; text-align: left;\">Auteur</th><th style=\"background: #007bff; color: white; padding: 12px; text-align: left;\">Catégorie</th><th style=\"background: #007bff; color: white; padding: 12px; text-align: left;\">Emprunts</th><th style=\"background: #007bff; color: white; padding: 12px; text-align: left;\">Taux</th></tr>\n            ${booksTable}\n        </table>`;\n        case 'monthly-activity':\n          const activeLoans = this.borrows.filter(loan => loan.status === 'active').length;\n          const returnedLoans = this.borrows.filter(loan => loan.status === 'returned').length;\n          const overdueLoans = this.overdueBorrows.length;\n          return `\n        <div class=\"highlight\">\n            <strong>📈 Activité Réelle</strong><br>\n            Résumé de l'activité actuelle de la bibliothèque basé sur les vraies données.\n        </div>\n        <div class=\"stats-grid\">\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${activeLoans}</div>\n                <div class=\"stat-label\">Emprunts Actifs</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${returnedLoans}</div>\n                <div class=\"stat-label\">Retours</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${totalUsers}</div>\n                <div class=\"stat-label\">Utilisateurs</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${totalBooks}</div>\n                <div class=\"stat-label\">Livres Total</div>\n            </div>\n        </div>\n        <h3>📊 État Actuel</h3>\n        <table>\n            <tr><th>Indicateur</th><th>Valeur</th><th>Statut</th></tr>\n            <tr><td>Emprunts actifs</td><td>${activeLoans}</td><td>${activeLoans > 0 ? '🟢 Actif' : '🔴 Aucun'}</td></tr>\n            <tr><td>Livres disponibles</td><td>${totalBooks}</td><td>${totalBooks > 0 ? '🟢 Disponible' : '🔴 Vide'}</td></tr>\n            <tr><td>Utilisateurs inscrits</td><td>${totalUsers}</td><td>${totalUsers > 0 ? '🟢 Actif' : '🔴 Aucun'}</td></tr>\n            <tr><td>Retards</td><td>${overdueLoans}</td><td>${overdueLoans === 0 ? '🟢 Aucun' : '🟡 Attention'}</td></tr>\n        </table>`;\n        case 'active-users':\n          const usersWithLoans = this.users.map(user => ({\n            ...user,\n            active_loans: this.borrows.filter(loan => loan.user_id === user.id && loan.status === 'active').length,\n            total_loans: this.borrows.filter(loan => loan.user_id === user.id).length\n          }));\n          let usersTable = '';\n          if (usersWithLoans.length === 0) {\n            usersTable = '<tr><td colspan=\"6\" class=\"text-center\">Aucun utilisateur enregistré</td></tr>';\n          } else {\n            usersTable = usersWithLoans.map(user => `<tr><td>${user.name}</td><td>${user.email}</td><td>${user.active_loans}</td><td>${user.total_loans}</td><td>${new Date(user.created_at).toLocaleDateString()}</td><td>${user.status === 'active' ? '✅ Actif' : '❌ Inactif'}</td></tr>`).join('');\n          }\n          return `\n        <div class=\"highlight\">\n            <strong>👥 Utilisateurs Actifs</strong><br>\n            Liste réelle des utilisateurs de la bibliothèque.\n        </div>\n        <div class=\"stats-grid\">\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${totalUsers}</div>\n                <div class=\"stat-label\">Utilisateurs Total</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">${totalUsers > 0 ? (totalLoans / totalUsers).toFixed(1) : 0}</div>\n                <div class=\"stat-label\">Emprunts/Utilisateur</div>\n            </div>\n            <div class=\"stat-card\">  \n                <div class=\"stat-number\">${totalLoans > 0 ? Math.round(this.borrows.filter(l => l.status === 'returned').length / totalLoans * 100) : 0}%</div>\n                <div class=\"stat-label\">Taux de Retour</div>\n            </div>\n        </div>\n        <table>\n            <tr><th>Nom</th><th>Email</th><th>Emprunts Actifs</th><th>Total Emprunts</th><th>Inscription</th><th>Statut</th></tr>\n            ${usersTable}\n        </table>`;\n        case 'iot-stats':\n          return `\n        <div class=\"highlight\">\n            <strong>🔌 Statistiques IoT</strong><br>\n            État et performance des dispositifs IoT connectés à la bibliothèque.\n        </div>\n        <div class=\"stats-grid\">\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">2</div>\n                <div class=\"stat-label\">Dispositifs Connectés</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">98%</div>\n                <div class=\"stat-label\">Uptime Moyen</div>\n            </div>\n            <div class=\"stat-card\">\n                <div class=\"stat-number\">156</div>\n                <div class=\"stat-label\">Scans RFID</div>\n            </div>\n        </div>\n        <h3>📡 État des Dispositifs</h3>\n        <table>\n            <tr><th>Dispositif</th><th>Type</th><th>Statut</th><th>Uptime</th><th>Dernière Activité</th></tr>\n            <tr><td>🔴 Raspberry Pi 1</td><td>Lecteur RFID</td><td>❌ Hors ligne</td><td>0%</td><td>Non configuré</td></tr>\n            <tr><td>🔴 Kiosk Terminal</td><td>Self-service</td><td>❌ Hors ligne</td><td>0%</td><td>Non configuré</td></tr>\n        </table>\n        <div class=\"highlight\">\n            <strong>⚠️ Configuration Requise</strong><br>\n            Les dispositifs IoT ne sont pas encore configurés. Consultez la documentation pour l'installation.\n        </div>`;\n        default:\n          return '<p>Type de rapport non supporté.</p>';\n      }\n    }\n    // Méthodes logs\n    getLogTypeClass(type) {\n      const classes = {\n        'admin': 'bg-primary',\n        'user': 'bg-success',\n        'system': 'bg-secondary',\n        'error': 'bg-danger'\n      };\n      return classes[type] || 'bg-secondary';\n    }\n    filterLogs() {\n      this.filteredLogs = this.auditLogs.filter(log => {\n        const matchesSearch = !this.logSearch || log.action.toLowerCase().includes(this.logSearch.toLowerCase()) || log.details.toLowerCase().includes(this.logSearch.toLowerCase()) || log.user_name.toLowerCase().includes(this.logSearch.toLowerCase());\n        const matchesType = !this.logTypeFilter || log.type === this.logTypeFilter;\n        return matchesSearch && matchesType;\n      });\n    }\n    exportLogs() {\n      const csvContent = 'Date,Type,Utilisateur,Action,Details\\n' + this.filteredLogs.map(log => `\"${new Date(log.created_at).toLocaleString()}\",\"${log.type}\",\"${log.user_name}\",\"${log.action}\",\"${log.details}\"`).join('\\n');\n      const blob = new Blob([csvContent], {\n        type: 'text/csv;charset=utf-8'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `eLibrary_logs_${new Date().toISOString().split('T')[0]}.csv`;\n      a.click();\n      window.URL.revokeObjectURL(url);\n      alert('Export des logs téléchargé avec succès!');\n    }\n    // Méthodes de sauvegarde\n    saveSystemSettings() {\n      if (this.settings.default_borrow_days < 1 || this.settings.penalty_per_day < 0) {\n        alert('Veuillez entrer des valeurs valides!');\n        return;\n      }\n      // Simuler la sauvegarde\n      setTimeout(() => {\n        alert(`✓ Paramètres système sauvegardés avec succès!\\n\\n• Durée d'emprunt: ${this.settings.default_borrow_days} jours\\n• Pénalité: ${this.settings.penalty_per_day} CFA/jour\\n\\nLes nouveaux paramètres sont maintenant actifs.`);\n      }, 500);\n    }\n    saveIoTSettings() {\n      if (!this.settings.mqtt_broker || !this.settings.rfid_topic) {\n        alert('Veuillez remplir tous les champs IoT!');\n        return;\n      }\n      // Simuler la sauvegarde\n      setTimeout(() => {\n        alert(`✓ Paramètres IoT sauvegardés avec succès!\\n\\n• MQTT Broker: ${this.settings.mqtt_broker}\\n• Topic RFID: ${this.settings.rfid_topic}\\n\\nLes dispositifs IoT vont redémarrer avec les nouveaux paramètres.`);\n      }, 500);\n    }\n    // Méthodes pour retards et pénalités\n    applyPenalty(overdue) {\n      if (confirm(`Appliquer une pénalité de ${overdue.penalty_amount} CFA à ${overdue.user_name}?`)) {\n        // Ajouter à l'historique des pénalités\n        this.penaltyHistory.push({\n          id: Date.now(),\n          user_name: overdue.user_name,\n          book_title: overdue.book_title,\n          amount: overdue.penalty_amount,\n          applied_date: new Date(),\n          admin_name: this.currentUser?.name\n        });\n        // Marquer comme pénalisé\n        overdue.penalty_applied = true;\n        overdue.penalty_date = new Date();\n        // Envoyer notification à l'utilisateur\n        this.sendPenaltyNotification(overdue);\n        alert(`Pénalité de ${overdue.penalty_amount} CFA appliquée avec succès!\\nNotification envoyée à ${overdue.user_name}.`);\n      }\n    }\n    sendPenaltyNotification(overdue) {\n      // Simuler l'envoi de notification\n      console.log(`Notification envoyée à ${overdue.user_name}: Pénalité de ${overdue.penalty_amount} CFA appliquée pour le livre \"${overdue.book_title}\"`);\n    }\n    blacklistUser(userId) {\n      if (confirm('Mettre cet utilisateur en liste noire?')) {\n        console.log('Utilisateur blacklisté:', userId);\n        alert('Utilisateur ajouté à la liste noire!');\n      }\n    }\n    // Méthodes pour demandes d'inscription\n    approveRequest(requestId) {\n      if (confirm('Approuver cette demande d\\'inscription?\\nL\\'utilisateur pourra accéder à toutes les fonctionnalités.')) {\n        // Trouver la demande avant de la supprimer\n        const approvedRequest = this.registrationRequests.find(r => r.id === requestId);\n        // Supprimer de la liste des demandes\n        this.registrationRequests = this.registrationRequests.filter(r => r.id !== requestId);\n        // Supprimer aussi du localStorage si c'est une nouvelle demande\n        const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n        const updatedRequests = storedRequests.filter(r => r.id !== requestId);\n        localStorage.setItem('registrationRequests', JSON.stringify(updatedRequests));\n        // Ajouter à la liste des utilisateurs actifs\n        if (approvedRequest) {\n          const newUser = {\n            id: Date.now(),\n            name: approvedRequest.name,\n            surname: approvedRequest.surname,\n            email: approvedRequest.email,\n            role: 'user',\n            tag_uid: null,\n            active_borrows: 0,\n            status: 'approved',\n            photo_url: approvedRequest.photo_url,\n            created_at: new Date()\n          };\n          this.users.push(newUser);\n          // Mettre à jour le statut dans le localStorage pour l'utilisateur connecté\n          const currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n          if (currentUser.email === approvedRequest.email) {\n            currentUser.status = 'approved';\n            currentUser.photo_url = approvedRequest.photo_url;\n            // Forcer la mise à jour immédiate\n            this.authService.updateCurrentUser(currentUser);\n            // Déclencher un événement pour forcer le rafraîchissement\n            window.dispatchEvent(new CustomEvent('userStatusUpdated', {\n              detail: currentUser\n            }));\n          }\n          // Mettre à jour aussi dans la liste des utilisateurs inscrits\n          const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');\n          const userIndex = registeredUsers.findIndex(u => u.email === approvedRequest.email);\n          if (userIndex !== -1) {\n            registeredUsers[userIndex].status = 'approved';\n            registeredUsers[userIndex].photo_url = approvedRequest.photo_url;\n            localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));\n          }\n          // Sauvegarder la photo dans le stockage séparé\n          if (approvedRequest.photo_url) {\n            localStorage.setItem('userPhoto_' + approvedRequest.email, approvedRequest.photo_url);\n          }\n        }\n        alert('Demande approuvée avec succès!\\nL\\'utilisateur peut maintenant emprunter des livres.');\n      }\n    }\n    rejectRequest(requestId) {\n      const reason = prompt('Raison du rejet (optionnel):');\n      if (confirm('Rejeter définitivement cette demande d\\'inscription?')) {\n        this.registrationRequests = this.registrationRequests.filter(r => r.id !== requestId);\n        // Supprimer aussi du localStorage si c'est une nouvelle demande\n        const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n        const updatedRequests = storedRequests.filter(r => r.id !== requestId);\n        localStorage.setItem('registrationRequests', JSON.stringify(updatedRequests));\n        alert('Demande rejetée!\\nL\\'utilisateur a été notifié par email.');\n      }\n    }\n    requestDocument(requestId) {\n      const request = this.registrationRequests.find(r => r.id === requestId);\n      if (!request) return;\n      const documentType = prompt(`📄 DEMANDE DE JUSTIFICATIF\\n\\nUtilisateur: ${request.name} ${request.surname}\\nEmail: ${request.email}\\n\\nQuel document demander ?\\n\\nExemples:\\n- Carte d'étudiant\\n- Certificat de scolarité\\n- Attestation d'emploi\\n- Pièce d'identité\\n- Justificatif de domicile`);\n      if (documentType && documentType.trim().length > 0) {\n        // Marquer comme document manquant\n        request.documents_uploaded = false;\n        request.requested_document = documentType;\n        request.document_request_date = new Date();\n        // Mettre à jour dans localStorage\n        const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n        const requestIndex = storedRequests.findIndex(r => r.id === requestId);\n        if (requestIndex !== -1) {\n          storedRequests[requestIndex] = request;\n          localStorage.setItem('registrationRequests', JSON.stringify(storedRequests));\n        }\n        // Ajouter un log\n        this.auditLogs.unshift({\n          created_at: new Date(),\n          type: 'admin',\n          user_name: 'Admin',\n          action: 'Demande justificatif',\n          details: `Document demandé à ${request.name}: ${documentType}`\n        });\n        this.filteredLogs = [...this.auditLogs];\n        alert(`📧 Demande envoyée avec succès!\\n\\nUtilisateur: ${request.name}\\nDocument demandé: ${documentType}\\n\\n✉️ Un email a été envoyé à ${request.email} avec les instructions pour fournir ce document.`);\n      }\n    }\n    viewRequestProfile(request) {\n      let documentStatus = '';\n      if (request.documents_uploaded) {\n        documentStatus = '✓ Documents uploadés';\n      } else if (request.requested_document) {\n        documentStatus = `⏳ En attente: ${request.requested_document} (demandé le ${new Date(request.document_request_date).toLocaleDateString('fr-FR')})`;\n      } else {\n        documentStatus = '❌ Documents manquants';\n      }\n      const profileInfo = `\n📄 PROFIL COMPLET DE LA DEMANDE\n\n👤 INFORMATIONS PERSONNELLES\n• Nom: ${request.name} ${request.surname}\n• Email: ${request.email}\n• Établissement: ${request.etablissement}\n\n💼 PROFESSION\n• Type: ${this.getProfessionLabel(request.profession)}\n• Détail: ${request.profession_detail}\n\n🎯 MOTIVATIONS\n\"${request.motivations}\"\n\n📅 Date de demande: ${new Date(request.created_at).toLocaleDateString('fr-FR')}\n📆 Statut documents: ${documentStatus}\n\nℹ️ Que souhaitez-vous faire avec cette demande?`;\n      if (confirm(profileInfo + '\\n\\nCliquez OK pour APPROUVER ou Annuler pour continuer l\\'examen.')) {\n        this.approveRequest(request.id);\n      }\n    }\n    getProfessionLabel(profession) {\n      const labels = {\n        'etudiant': 'Étudiant',\n        'eleve': 'Élève',\n        'entrepreneur': 'Entrepreneur',\n        'autre': 'Autre'\n      };\n      return labels[profession] || profession;\n    }\n    getPendingBorrowRequests() {\n      const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]');\n      console.log('Toutes les demandes d\\'emprunt:', borrowRequests);\n      const pendingRequests = borrowRequests.filter(req => req.status === 'pending');\n      console.log('Demandes en attente:', pendingRequests);\n      return pendingRequests;\n    }\n    approveBorrowRequest(requestId) {\n      if (confirm('Approuver cette demande d\\'emprunt ?\\nL\\'utilisateur pourra venir récupérer le livre.')) {\n        const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]');\n        const requestIndex = borrowRequests.findIndex(req => req.id === requestId);\n        if (requestIndex !== -1) {\n          borrowRequests[requestIndex].status = 'approved';\n          borrowRequests[requestIndex].admin_response = 'approved';\n          borrowRequests[requestIndex].approval_date = new Date().toISOString();\n          localStorage.setItem('borrowRequests', JSON.stringify(borrowRequests));\n          alert('Demande approuvée ! L\\'utilisateur recevra une notification et pourra venir récupérer le livre.');\n        }\n      }\n    }\n    rejectBorrowRequest(requestId) {\n      const reason = prompt('Motif du rejet (obligatoire):');\n      if (reason && reason.trim().length > 0) {\n        if (confirm(`Rejeter cette demande d\\'emprunt ?\\nMotif: ${reason}`)) {\n          const borrowRequests = JSON.parse(localStorage.getItem('borrowRequests') || '[]');\n          const requestIndex = borrowRequests.findIndex(req => req.id === requestId);\n          if (requestIndex !== -1) {\n            borrowRequests[requestIndex].status = 'rejected';\n            borrowRequests[requestIndex].admin_response = 'rejected';\n            borrowRequests[requestIndex].rejection_reason = reason;\n            borrowRequests[requestIndex].rejection_date = new Date().toISOString();\n            localStorage.setItem('borrowRequests', JSON.stringify(borrowRequests));\n            alert('Demande rejetée. L\\'utilisateur recevra une notification avec le motif.');\n          }\n        }\n      } else if (reason !== null) {\n        alert('Le motif du rejet est obligatoire.');\n      }\n    }\n    // Méthodes pour gestion utilisateurs\n    viewUserProfile(user) {\n      alert(`Profil utilisateur:\\n\\nNom: ${user.name} ${user.surname || ''}\\nEmail: ${user.email}\\nRôle: ${user.role}\\nStatut: ${user.status}\\nInscription: ${new Date(user.created_at).toLocaleDateString()}`);\n    }\n    assignUserTag(user) {\n      const tagUid = prompt('Entrez l\\'UID du tag RFID pour cet utilisateur:', user.tag_uid || '');\n      if (tagUid) {\n        user.tag_uid = tagUid;\n        alert('Tag assigné à l\\'utilisateur avec succès!');\n      }\n    }\n    toggleUserStatus(user) {\n      const action = user.status === 'active' ? 'suspendre' : 'activer';\n      if (confirm(`${action.charAt(0).toUpperCase() + action.slice(1)} l\\'utilisateur ${user.name}?`)) {\n        user.status = user.status === 'active' ? 'suspended' : 'active';\n        alert(`Utilisateur ${action} avec succès!`);\n      }\n    }\n    deleteUser(user) {\n      const reason = prompt(`⚠️ SUPPRESSION D\\'UTILISATEUR\\n\\nUtilisateur: ${user.name}\\nEmail: ${user.email}\\n\\nPourquoi supprimer cet utilisateur ?\\n(Cette action est irréversible)`);\n      if (reason && reason.trim().length > 0) {\n        if (confirm(`🗑️ CONFIRMATION DE SUPPRESSION\\n\\nUtilisateur: ${user.name}\\nRaison: ${reason}\\n\\n⚠️ Cette action supprimera définitivement:\\n- Le compte utilisateur\\n- Tous ses emprunts\\n- Son historique\\n\\nÊtes-vous absolument sûr ?`)) {\n          // Supprimer de la liste locale\n          this.users = this.users.filter(u => u.id !== user.id);\n          // Supprimer des utilisateurs enregistrés\n          const registeredUsers = JSON.parse(localStorage.getItem('registeredUsers') || '[]');\n          const updatedUsers = registeredUsers.filter(u => u.id !== user.id);\n          localStorage.setItem('registeredUsers', JSON.stringify(updatedUsers));\n          // Ajouter un log de suppression\n          this.auditLogs.unshift({\n            created_at: new Date(),\n            type: 'admin',\n            user_name: 'Admin',\n            action: 'Suppression utilisateur',\n            details: `Utilisateur supprimé: ${user.name} (${user.email}) - Raison: ${reason}`\n          });\n          this.filteredLogs = [...this.auditLogs];\n          alert(`✅ Utilisateur supprimé avec succès!\\n\\nUtilisateur: ${user.name}\\nRaison: ${reason}\\n\\nLa suppression a été enregistrée dans les logs.`);\n        }\n      } else if (reason !== null) {\n        alert('❌ Suppression annulée\\n\\nVous devez préciser une raison pour supprimer un utilisateur.');\n      }\n    }\n    hasNewRegistrations() {\n      if (this.alertDismissed) return false;\n      const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n      return storedRequests.some(req => !this.viewedNotifications.has(req.id));\n    }\n    getNewRegistrationsCount() {\n      const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n      return storedRequests.filter(req => !this.viewedNotifications.has(req.id)).length;\n    }\n    markNotificationsAsViewed() {\n      const storedRequests = JSON.parse(localStorage.getItem('registrationRequests') || '[]');\n      storedRequests.forEach(req => this.viewedNotifications.add(req.id));\n    }\n    dismissAlert() {\n      this.alertDismissed = true;\n    }\n    getFilteredBorrows() {\n      let filteredBorrows = this.borrows;\n      if (this.borrowView === 'current') {\n        // Emprunts en cours (approved, active)\n        filteredBorrows = this.borrows.filter(borrow => borrow.status === 'approved' || borrow.status === 'active');\n      } else if (this.borrowView === 'history') {\n        // Historique (returned, rejected, overdue)\n        filteredBorrows = this.borrows.filter(borrow => borrow.status === 'returned' || borrow.status === 'rejected' || borrow.status === 'overdue');\n      }\n      return filteredBorrows;\n    }\n    getFilteredUsers() {\n      let filteredUsers = this.users;\n      // Filtrer par recherche\n      if (this.userSearch) {\n        filteredUsers = filteredUsers.filter(user => user.name.toLowerCase().includes(this.userSearch.toLowerCase()) || user.email.toLowerCase().includes(this.userSearch.toLowerCase()) || user.surname && user.surname.toLowerCase().includes(this.userSearch.toLowerCase()));\n      }\n      // Filtrer par rôle\n      if (this.userRoleFilter) {\n        filteredUsers = filteredUsers.filter(user => user.role === this.userRoleFilter);\n      }\n      // Filtrer par statut\n      if (this.userStatusFilter) {\n        filteredUsers = filteredUsers.filter(user => user.status === this.userStatusFilter);\n      }\n      return filteredUsers;\n    }\n    getUserActiveBorrows(userId) {\n      return this.borrows.filter(borrow => borrow.user_id === userId && (borrow.status === 'active' || borrow.status === 'approved')).length;\n    }\n    getBorrowStatusClass(status) {\n      const classes = {\n        'pending': 'bg-warning',\n        'approved': 'bg-info',\n        'active': 'bg-primary',\n        'returned': 'bg-success',\n        'overdue': 'bg-danger',\n        'rejected': 'bg-danger'\n      };\n      return classes[status] || 'bg-secondary';\n    }\n    onUserImageError(event) {\n      event.target.src = this.getDefaultUserImage();\n    }\n    getDefaultUserImage() {\n      return 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNlOWVjZWYiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA0IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSIjNmM3NTdkIi8+CjxwYXRoIGQ9Ik0xMiAxNEM5LjMzIDEzLjk5IDcuMDEgMTUuNjIgNiAxOEMxMC4wMSAyMCAxMy45OSAyMCAxOCAxOEMxNi45OSAxNS42MiAxNC42NyAxMy45OSAxMiAxNFoiIGZpbGw9IiM2Yzc1N2QiLz4KPC9zdmc+Cjwvc3ZnPgo=';\n    }\n    logout() {\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    static {\n      this.ɵfac = function AdminDashboardComponent_Factory(t) {\n        return new (t || AdminDashboardComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.PdfService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AdminDashboardComponent,\n        selectors: [[\"app-admin-dashboard\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 73,\n        vars: 40,\n        consts: [[1, \"admin-layout\"], [1, \"sidebar\"], [1, \"sidebar-header\"], [1, \"logo-container\", \"mb-2\"], [1, \"admin-logo\"], [1, \"mini-wifi\"], [1, \"mini-book\"], [1, \"text-muted\"], [1, \"sidebar-nav\"], [1, \"nav-item\", 3, \"click\"], [1, \"fas\", \"fa-tachometer-alt\"], [1, \"fas\", \"fa-users\"], [\"class\", \"nav-badge\", 4, \"ngIf\"], [1, \"fas\", \"fa-handshake\"], [\"class\", \"nav-badge bg-warning\", 4, \"ngIf\"], [1, \"fas\", \"fa-book\"], [1, \"fas\", \"fa-warehouse\"], [1, \"fas\", \"fa-exclamation-triangle\"], [\"class\", \"nav-badge bg-danger\", 4, \"ngIf\"], [1, \"fas\", \"fa-clipboard-list\"], [1, \"fas\", \"fa-chart-bar\"], [1, \"fas\", \"fa-cog\"], [1, \"fas\", \"fa-file-alt\"], [1, \"sidebar-footer\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", \"w-100\", 3, \"click\"], [1, \"fas\", \"fa-sign-out-alt\"], [1, \"main-content\"], [1, \"content-header\"], [1, \"breadcrumb\"], [1, \"fas\", \"fa-chevron-right\"], [\"class\", \"content-body\", 4, \"ngIf\"], [1, \"nav-badge\"], [1, \"nav-badge\", \"bg-warning\"], [1, \"nav-badge\", \"bg-danger\"], [1, \"content-body\"], [\"class\", \"alert alert-info mb-4 alert-dismissible\", 4, \"ngIf\"], [1, \"row\", \"mb-4\"], [1, \"col-md-3\"], [1, \"card\", \"bg-primary\", \"text-white\"], [1, \"card-body\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"fas\", \"fa-book\", \"fa-2x\"], [1, \"card\", \"bg-success\", \"text-white\"], [1, \"fas\", \"fa-users\", \"fa-2x\"], [1, \"card\", \"bg-info\", \"text-white\"], [1, \"fas\", \"fa-handshake\", \"fa-2x\"], [1, \"card\", \"bg-warning\", \"text-white\"], [1, \"fas\", \"fa-exclamation-triangle\", \"fa-2x\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"card\"], [1, \"card-header\"], [1, \"fas\", \"fa-star\"], [\"class\", \"mb-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"fas\", \"fa-clock\"], [1, \"alert\", \"alert-info\", \"mb-4\", \"alert-dismissible\"], [1, \"d-flex\", \"align-items-center\"], [1, \"fas\", \"fa-bell\", \"fa-2x\", \"me-3\"], [1, \"flex-grow-1\"], [1, \"mb-1\"], [1, \"mb-2\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-eye\", \"me-1\"], [1, \"badge\", \"bg-warning\", \"fs-6\"], [\"type\", \"button\", 1, \"btn-close\", 3, \"click\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"search-filters\"], [\"type\", \"text\", \"placeholder\", \"Recherche titre, auteur, ISBN...\", 1, \"form-control\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"form-select\", \"ms-2\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"1\"], [\"value\", \"0\"], [1, \"btn\", \"btn-outline-secondary\", \"me-2\", 3, \"click\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"table-responsive\"], [1, \"table\", \"table-hover\"], [\"type\", \"checkbox\", 3, \"change\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"mb-3\"], [1, \"col-md-8\"], [1, \"col-md-4\"], [1, \"btn\", \"btn-success\", \"w-100\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [\"class\", \"card mb-4\", 4, \"ngIf\"], [\"class\", \"col-md-4 mb-3\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"type\", \"checkbox\", 3, \"change\", \"value\"], [\"width\", \"40\", \"height\", \"56\", 1, \"book-cover\", 3, \"src\"], [\"title\", \"Voir\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-1\", 3, \"click\"], [1, \"fas\", \"fa-eye\"], [\"title\", \"\\u00C9diter\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"me-1\", 3, \"click\"], [1, \"fas\", \"fa-edit\"], [\"title\", \"Assigner Tag\", 1, \"btn\", \"btn-sm\", \"btn-outline-info\", \"me-1\", 3, \"click\"], [1, \"fas\", \"fa-tag\"], [\"title\", \"Supprimer\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [1, \"card\", \"mb-4\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"title\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"author\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"isbn\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"input-group\"], [\"name\", \"category_id\", \"required\", \"\", 1, \"form-select\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", 3, \"click\"], [\"type\", \"number\", \"name\", \"stock\", \"required\", \"\", \"min\", \"1\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"class\", \"alert alert-info\", 4, \"ngIf\"], [\"type\", \"file\", \"accept\", \"image/*\", 1, \"form-control\", 3, \"change\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [\"name\", \"description\", \"rows\", \"3\", \"placeholder\", \"R\\u00E9sum\\u00E9 du livre, synopsis...\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-flex\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"alert\", \"alert-info\"], [\"type\", \"text\", \"placeholder\", \"Nom de la cat\\u00E9gorie\", \"name\", \"categoryName\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"Description\", \"name\", \"categoryDesc\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"col-md-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"click\"], [1, \"fas\", \"fa-check\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-sm\", \"ms-1\", 3, \"click\"], [1, \"fas\", \"fa-times\"], [1, \"mt-2\"], [\"width\", \"100\", \"height\", \"140\", 1, \"book-cover-preview\", 3, \"src\"], [1, \"col-md-4\", \"mb-3\"], [1, \"card-title\"], [1, \"card-text\"], [\"type\", \"text\", \"placeholder\", \"Recherche nom, email...\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"form-select\", \"ms-2\", 3, \"ngModelChange\", \"ngModel\"], [\"value\", \"user\"], [\"value\", \"admin\"], [\"value\", \"active\"], [\"value\", \"suspended\"], [1, \"btn\", \"btn-outline-secondary\"], [\"class\", \"text-center py-4\", 4, \"ngIf\"], [\"alt\", \"Photo\", \"class\", \"user-photo me-2\", 3, \"src\", \"error\", 4, \"ngIf\"], [1, \"badge\", \"bg-primary\"], [1, \"badge\"], [\"title\", \"Voir profil\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-1\", 3, \"click\"], [\"title\", \"Assigner tag\", 1, \"btn\", \"btn-sm\", \"btn-outline-info\", \"me-1\", 3, \"click\"], [1, \"fas\", \"fa-id-card\"], [\"title\", \"Suspendre/Activer\", 1, \"btn\", \"btn-sm\", 3, \"click\"], [1, \"fas\"], [\"title\", \"Supprimer utilisateur\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"ms-1\", 3, \"click\"], [\"alt\", \"Photo\", 1, \"user-photo\", \"me-2\", 3, \"error\", \"src\"], [1, \"text-center\", \"py-4\"], [1, \"fas\", \"fa-users\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"btn\", 3, \"click\"], [\"class\", \"badge bg-danger ms-1\", 4, \"ngIf\"], [\"type\", \"text\", \"placeholder\", \"Recherche par livre ou utilisateur...\", 1, \"form-control\"], [\"class\", \"table-responsive\", 4, \"ngIf\"], [1, \"badge\", \"bg-danger\", \"ms-1\"], [1, \"badge\", \"bg-warning\"], [\"title\", \"Approuver\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"me-1\", 3, \"click\"], [\"title\", \"Rejeter\", 1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"fas\", \"fa-clipboard-check\", \"fa-3x\", \"text-muted\", \"mb-3\"], [\"class\", \"btn btn-sm btn-outline-success me-1\", \"title\", \"Marquer retourn\\u00E9\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-outline-primary me-1\", \"title\", \"Prolonger\", 4, \"ngIf\"], [\"class\", \"btn btn-sm btn-outline-warning\", \"title\", \"Envoyer rappel\", 4, \"ngIf\"], [\"title\", \"Marquer retourn\\u00E9\", 1, \"btn\", \"btn-sm\", \"btn-outline-success\", \"me-1\", 3, \"click\"], [\"title\", \"Prolonger\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-1\"], [1, \"fas\", \"fa-calendar-plus\"], [\"title\", \"Envoyer rappel\", 1, \"btn\", \"btn-sm\", \"btn-outline-warning\"], [1, \"fas\", \"fa-envelope\"], [1, \"fas\", \"fa-book\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"alert\", \"alert-warning\", \"mb-4\"], [1, \"fas\", \"fa-wifi\"], [\"class\", \"device-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"fas\", \"fa-search\"], [1, \"btn\", \"btn-primary\", \"mb-3\", 3, \"click\"], [1, \"fas\", \"fa-barcode\"], [\"class\", \"text-muted\", 4, \"ngIf\"], [1, \"col-12\"], [1, \"fas\", \"fa-info-circle\"], [1, \"alert\", \"alert-info\", \"mt-3\"], [1, \"text-center\"], [1, \"bg-light\", \"p-3\", \"rounded\", \"mb-3\"], [1, \"fas\", \"fa-microchip\", \"fa-4x\", \"text-primary\", \"mb-2\"], [1, \"fas\", \"fa-wifi\", \"fa-4x\", \"text-success\", \"mb-2\"], [1, \"bg-light\", \"p-3\", \"rounded\"], [1, \"fas\", \"fa-tags\", \"fa-4x\", \"text-warning\", \"mb-2\"], [1, \"mt-4\"], [1, \"text-center\", \"p-3\", \"border\", \"rounded\"], [1, \"badge\", \"bg-primary\", \"rounded-pill\", \"mb-2\"], [1, \"badge\", \"bg-success\", \"rounded-pill\", \"mb-2\"], [1, \"text-center\", \"mt-4\"], [1, \"btn\", \"btn-outline-primary\", \"me-2\", 3, \"click\"], [1, \"fas\", \"fa-play\"], [\"disabled\", \"\", 1, \"btn\", \"btn-outline-secondary\"], [1, \"fas\", \"fa-download\"], [1, \"fas\", \"fa-plug\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"device-item\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"badge\", \"bg-info\"], [1, \"text-danger\"], [\"title\", \"Appliquer p\\u00E9nalit\\u00E9\", 1, \"btn\", \"btn-sm\", \"btn-outline-warning\", \"me-1\", 3, \"click\"], [1, \"fas\", \"fa-coins\"], [\"title\", \"Envoyer relance\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-1\", 3, \"click\"], [\"title\", \"Liste noire\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [1, \"fas\", \"fa-ban\"], [\"class\", \"badge bg-success\", 4, \"ngIf\"], [\"class\", \"badge bg-warning\", 4, \"ngIf\"], [\"class\", \"badge bg-danger\", 3, \"title\", 4, \"ngIf\"], [\"title\", \"Voir profil complet\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"me-1\", 3, \"click\"], [\"title\", \"Valider\", 1, \"btn\", \"btn-sm\", \"btn-outline-success\", \"me-1\", 3, \"click\"], [\"title\", \"Refuser\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", \"me-1\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-outline-info\", 3, \"click\", \"title\"], [1, \"badge\", \"bg-success\"], [1, \"badge\", \"bg-danger\", 3, \"title\"], [1, \"fas\", \"fa-file-pdf\"], [1, \"btn\", \"btn-outline-danger\", \"w-100\", \"mb-2\", 3, \"click\"], [1, \"fas\", \"fa-trophy\"], [1, \"btn\", \"btn-outline-success\", \"w-100\", \"mb-2\", 3, \"click\"], [1, \"fas\", \"fa-calendar-alt\"], [1, \"btn\", \"btn-outline-info\", \"w-100\", \"mb-2\", 3, \"click\"], [1, \"btn\", \"btn-outline-warning\", \"w-100\", 3, \"click\"], [1, \"fas\", \"fa-microchip\"], [1, \"fas\", \"fa-chart-line\"], [\"id\", \"borrowsChart\", \"width\", \"300\", \"height\", \"200\"], [1, \"text-center\", \"mt-2\"], [\"id\", \"categoriesChart\", \"width\", \"300\", \"height\", \"200\"], [1, \"row\", \"mt-4\"], [\"id\", \"usersChart\", \"width\", \"300\", \"height\", \"200\"], [\"id\", \"trendsChart\", \"width\", \"300\", \"height\", \"200\"], [\"type\", \"number\", \"min\", \"1\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"min\", \"0\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"localhost:1883\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"library/rfid\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"placeholder\", \"Recherche dans les logs...\", 1, \"form-control\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [\"value\", \"system\"], [1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [1, \"text-center\", \"py-5\"], [1, \"fas\", \"fa-file-alt\", \"fa-3x\", \"text-muted\", \"mb-3\"]],\n        template: function AdminDashboardComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n            i0.ɵɵelement(5, \"div\", 5)(6, \"div\", 6);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"h4\");\n            i0.ɵɵtext(8, \"Admin\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"p\", 7);\n            i0.ɵɵtext(10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"nav\", 8)(12, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_12_listener() {\n              return ctx.setActiveTab(\"dashboard\");\n            });\n            i0.ɵɵelement(13, \"i\", 10);\n            i0.ɵɵtext(14, \" Tableau de bord \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_15_listener() {\n              return ctx.setActiveTab(\"users\");\n            });\n            i0.ɵɵelement(16, \"i\", 11);\n            i0.ɵɵtext(17, \" Utilisateurs \");\n            i0.ɵɵtemplate(18, AdminDashboardComponent_span_18_Template, 2, 1, \"span\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_19_listener() {\n              return ctx.setActiveTab(\"borrows\");\n            });\n            i0.ɵɵelement(20, \"i\", 13);\n            i0.ɵɵtext(21, \" Emprunts \");\n            i0.ɵɵtemplate(22, AdminDashboardComponent_span_22_Template, 2, 1, \"span\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_23_listener() {\n              return ctx.setActiveTab(\"books\");\n            });\n            i0.ɵɵelement(24, \"i\", 15);\n            i0.ɵɵtext(25, \" Livres / Catalogue \");\n            i0.ɵɵtemplate(26, AdminDashboardComponent_span_26_Template, 2, 1, \"span\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_27_listener() {\n              return ctx.setActiveTab(\"inventory\");\n            });\n            i0.ɵɵelement(28, \"i\", 16);\n            i0.ɵɵtext(29, \" Inventaire (IoT) \");\n            i0.ɵɵtemplate(30, AdminDashboardComponent_span_30_Template, 2, 1, \"span\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_31_listener() {\n              return ctx.setActiveTab(\"overdue\");\n            });\n            i0.ɵɵelement(32, \"i\", 17);\n            i0.ɵɵtext(33, \" Retards & P\\u00E9nalit\\u00E9s \");\n            i0.ɵɵtemplate(34, AdminDashboardComponent_span_34_Template, 2, 1, \"span\", 18);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(35, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_35_listener() {\n              return ctx.setActiveTab(\"requests\");\n            });\n            i0.ɵɵelement(36, \"i\", 19);\n            i0.ɵɵtext(37, \" Demandes / Inscriptions \");\n            i0.ɵɵtemplate(38, AdminDashboardComponent_span_38_Template, 2, 1, \"span\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_39_listener() {\n              return ctx.setActiveTab(\"reports\");\n            });\n            i0.ɵɵelement(40, \"i\", 20);\n            i0.ɵɵtext(41, \" Statistiques & Rapports \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(42, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_42_listener() {\n              return ctx.setActiveTab(\"settings\");\n            });\n            i0.ɵɵelement(43, \"i\", 21);\n            i0.ɵɵtext(44, \" Configuration \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(45, \"a\", 9);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_a_click_45_listener() {\n              return ctx.setActiveTab(\"logs\");\n            });\n            i0.ɵɵelement(46, \"i\", 22);\n            i0.ɵɵtext(47, \" Logs / Audit \");\n            i0.ɵɵtemplate(48, AdminDashboardComponent_span_48_Template, 2, 1, \"span\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(49, \"div\", 23)(50, \"button\", 24);\n            i0.ɵɵlistener(\"click\", function AdminDashboardComponent_Template_button_click_50_listener() {\n              return ctx.logout();\n            });\n            i0.ɵɵelement(51, \"i\", 25);\n            i0.ɵɵtext(52, \" D\\u00E9connexion \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(53, \"div\", 26)(54, \"div\", 27)(55, \"h3\");\n            i0.ɵɵtext(56);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(57, \"div\", 28)(58, \"span\");\n            i0.ɵɵtext(59, \"Admin\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(60, \"i\", 29);\n            i0.ɵɵelementStart(61, \"span\");\n            i0.ɵɵtext(62);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(63, AdminDashboardComponent_div_63_Template, 60, 7, \"div\", 30)(64, AdminDashboardComponent_div_64_Template, 57, 7, \"div\", 30)(65, AdminDashboardComponent_div_65_Template, 45, 5, \"div\", 30)(66, AdminDashboardComponent_div_66_Template, 16, 9, \"div\", 30)(67, AdminDashboardComponent_div_67_Template, 148, 4, \"div\", 30)(68, AdminDashboardComponent_div_68_Template, 10, 6, \"div\", 30)(69, AdminDashboardComponent_div_69_Template, 19, 1, \"div\", 30)(70, AdminDashboardComponent_div_70_Template, 50, 0, \"div\", 30)(71, AdminDashboardComponent_div_71_Template, 34, 4, \"div\", 30)(72, AdminDashboardComponent_div_72_Template, 17, 4, \"div\", 30);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵtextInterpolate(ctx.currentUser == null ? null : ctx.currentUser.name);\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"dashboard\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"users\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.users.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"borrows\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.getPendingBorrowRequests().length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"books\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.books.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"inventory\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.iotDevices.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"overdue\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.overdueBorrows.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"requests\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.registrationRequests.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"reports\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"settings\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵclassProp(\"active\", ctx.activeTab === \"logs\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.auditLogs.length > 0);\n            i0.ɵɵadvance(8);\n            i0.ɵɵtextInterpolate(ctx.getTabTitle());\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.getTabTitle());\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"dashboard\" && ctx.stats);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"books\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"users\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"borrows\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"inventory\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"overdue\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"requests\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"reports\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"settings\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.activeTab === \"logs\");\n          }\n        },\n        dependencies: [CommonModule, i5.NgForOf, i5.NgIf, i5.DatePipe, FormsModule, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.SelectControlValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.MinValidator, i6.NgModel, i6.NgForm],\n        styles: [\".admin-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh}.sidebar[_ngcontent-%COMP%]{width:280px;background:linear-gradient(180deg,#f8f9fa,#e9ecef);border-right:1px solid #dee2e6;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #dee2e6;background:#fff}.sidebar-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#495057}.sidebar-nav[_ngcontent-%COMP%]{flex:1;padding:1rem 0}.nav-item[_ngcontent-%COMP%]{display:block;padding:.75rem 1.5rem;color:#6c757d;text-decoration:none;transition:all .2s;cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover{background:#007bff1a;color:#007bff}.nav-item.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-right:3px solid #0056b3}.nav-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;margin-right:10px}.nav-badge[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-radius:50%;padding:2px 6px;font-size:.7rem;margin-left:8px;min-width:18px;text-align:center}.nav-badge.bg-danger[_ngcontent-%COMP%]{background:#dc3545!important}.sidebar-footer[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid #dee2e6}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.content-header[_ngcontent-%COMP%]{background:#fff;padding:1.5rem 2rem;border-bottom:1px solid #dee2e6}.content-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#495057}.breadcrumb[_ngcontent-%COMP%]{color:#6c757d;font-size:.875rem;margin-top:.5rem}.breadcrumb[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 .5rem;font-size:.75rem}.content-body[_ngcontent-%COMP%]{flex:1;padding:2rem;background:#f8f9fa}.search-filters[_ngcontent-%COMP%]{display:flex;gap:.5rem}.search-filters[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .search-filters[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{min-width:200px}.book-cover[_ngcontent-%COMP%]{border-radius:4px;object-fit:cover}.book-cover-preview[_ngcontent-%COMP%]{border-radius:8px;object-fit:cover;border:2px solid #dee2e6;box-shadow:0 2px 8px #0000001a}.device-item[_ngcontent-%COMP%]{padding:.75rem;border-bottom:1px solid #dee2e6}.device-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.user-photo[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover;border:1px solid #dee2e6}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.admin-logo[_ngcontent-%COMP%]{width:40px;height:40px;position:relative;margin:0 auto}.mini-wifi[_ngcontent-%COMP%]{width:20px;height:6px;background:#2e8b8b;border-radius:10px 10px 0 0;margin:0 auto 2px}.mini-book[_ngcontent-%COMP%]{width:30px;height:25px;background:#1b365d;border-radius:4px;margin:0 auto;position:relative}.mini-book[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:4px;left:4px;right:4px;height:17px;background:#fff;border-radius:2px}@media (max-width: 768px){.admin-layout[_ngcontent-%COMP%]{flex-direction:column}.sidebar[_ngcontent-%COMP%]{width:100%;height:auto}.sidebar-nav[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:.5rem}.nav-item[_ngcontent-%COMP%]{white-space:nowrap;min-width:150px}}\"]\n      });\n    }\n  }\n  return AdminDashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}