{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction BooksComponent_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r1.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", category_r1.name, \" \");\n  }\n}\nfunction BooksComponent_div_20_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r4.id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", category_r4.name, \" \");\n  }\n}\nfunction BooksComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"h5\");\n    i0.ɵɵtext(3, \"Ajouter un Livre\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 22)(5, \"form\", 23);\n    i0.ɵɵlistener(\"ngSubmit\", function BooksComponent_div_20_Template_form_ngSubmit_5_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addBook());\n    });\n    i0.ɵɵelementStart(6, \"div\", 0)(7, \"div\", 4)(8, \"div\", 24)(9, \"label\", 25);\n    i0.ɵɵtext(10, \"Titre\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"input\", 26);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_div_20_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newBook.title, $event) || (ctx_r2.newBook.title = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 24)(14, \"label\", 25);\n    i0.ɵɵtext(15, \"Auteur\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 27);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_div_20_Template_input_ngModelChange_16_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newBook.author, $event) || (ctx_r2.newBook.author = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(17, \"div\", 0)(18, \"div\", 9)(19, \"div\", 24)(20, \"label\", 25);\n    i0.ɵɵtext(21, \"ISBN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 28);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_div_20_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newBook.isbn, $event) || (ctx_r2.newBook.isbn = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"div\", 9)(24, \"div\", 24)(25, \"label\", 25);\n    i0.ɵɵtext(26, \"Cat\\u00E9gorie\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"select\", 29);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_div_20_Template_select_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newBook.category_id, $event) || (ctx_r2.newBook.category_id = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementStart(28, \"option\", 11);\n    i0.ɵɵtext(29, \"S\\u00E9lectionner...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(30, BooksComponent_div_20_option_30_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"div\", 9)(32, \"div\", 24)(33, \"label\", 25);\n    i0.ɵɵtext(34, \"Quantit\\u00E9\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"input\", 30);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_div_20_Template_input_ngModelChange_35_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newBook.quantity, $event) || (ctx_r2.newBook.quantity = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(36, \"div\", 24)(37, \"label\", 25);\n    i0.ɵɵtext(38, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"textarea\", 31);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_div_20_Template_textarea_ngModelChange_39_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newBook.description, $event) || (ctx_r2.newBook.description = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(40, \"div\", 32)(41, \"button\", 33);\n    i0.ɵɵtext(42, \"Ajouter\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function BooksComponent_div_20_Template_button_click_43_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.cancelAdd());\n    });\n    i0.ɵɵtext(44, \"Annuler\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newBook.title);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newBook.author);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newBook.isbn);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newBook.category_id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.categories);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newBook.quantity);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newBook.description);\n  }\n}\nfunction BooksComponent_div_22_p_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 38);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const book_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(book_r5.description);\n  }\n}\nfunction BooksComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"div\", 36)(2, \"div\", 22)(3, \"h5\", 37);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 38)(6, \"strong\");\n    i0.ɵɵtext(7, \"Auteur:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11, \"ISBN:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"strong\");\n    i0.ɵɵtext(15, \"Cat\\u00E9gorie:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelement(17, \"br\");\n    i0.ɵɵelementStart(18, \"strong\");\n    i0.ɵɵtext(19, \"Disponible:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, BooksComponent_div_22_p_21_Template, 2, 1, \"p\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 40)(23, \"span\", 41);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const book_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(book_r5.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", book_r5.author, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", book_r5.isbn, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", book_r5.category == null ? null : book_r5.category.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", book_r5.available_quantity, \"/\", book_r5.quantity, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", book_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMap(book_r5.available_quantity > 0 ? \"bg-success\" : \"bg-danger\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", book_r5.available_quantity > 0 ? \"Disponible\" : \"Indisponible\", \" \");\n  }\n}\nfunction BooksComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵelement(1, \"i\", 43);\n    i0.ɵɵelementStart(2, \"p\", 44);\n    i0.ɵɵtext(3, \"Aucun livre trouv\\u00E9\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let BooksComponent = /*#__PURE__*/(() => {\n  class BooksComponent {\n    constructor(apiService) {\n      this.apiService = apiService;\n      this.books = [];\n      this.categories = [];\n      this.searchTerm = '';\n      this.selectedCategory = '';\n      this.showAddForm = false;\n      this.newBook = {};\n    }\n    ngOnInit() {\n      this.loadBooks();\n      this.loadCategories();\n    }\n    loadBooks() {\n      const params = {};\n      if (this.searchTerm) params.search = this.searchTerm;\n      if (this.selectedCategory) params.category_id = this.selectedCategory;\n      this.apiService.getBooks(params).subscribe({\n        next: response => this.books = response.data || response,\n        error: error => console.error('Erreur lors du chargement des livres:', error)\n      });\n    }\n    loadCategories() {\n      this.apiService.getCategories().subscribe({\n        next: data => this.categories = data,\n        error: error => console.error('Erreur lors du chargement des catégories:', error)\n      });\n    }\n    searchBooks() {\n      this.loadBooks();\n    }\n    filterByCategory() {\n      this.loadBooks();\n    }\n    addBook() {\n      if (this.newBook.title && this.newBook.author && this.newBook.isbn) {\n        this.apiService.createBook(this.newBook).subscribe({\n          next: () => {\n            this.loadBooks();\n            this.cancelAdd();\n          },\n          error: error => console.error('Erreur lors de l\\'ajout du livre:', error)\n        });\n      }\n    }\n    cancelAdd() {\n      this.showAddForm = false;\n      this.newBook = {};\n    }\n    static {\n      this.ɵfac = function BooksComponent_Factory(t) {\n        return new (t || BooksComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: BooksComponent,\n        selectors: [[\"app-books\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 24,\n        vars: 6,\n        consts: [[1, \"row\"], [1, \"col-12\"], [1, \"fas\", \"fa-books\"], [1, \"row\", \"mb-4\"], [1, \"col-md-6\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Rechercher un livre...\", 1, \"form-control\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"fas\", \"fa-search\"], [1, \"col-md-4\"], [1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-2\"], [1, \"btn\", \"btn-primary\", \"w-100\", 3, \"click\"], [1, \"fas\", \"fa-plus\"], [\"class\", \"card mb-4\", 4, \"ngIf\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center py-5\", 4, \"ngIf\"], [3, \"value\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"title\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"author\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"text\", \"name\", \"isbn\", \"required\", \"\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"category_id\", \"required\", \"\", 1, \"form-select\", 3, \"ngModelChange\", \"ngModel\"], [\"type\", \"number\", \"name\", \"quantity\", \"required\", \"\", \"min\", \"1\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"description\", \"rows\", \"3\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-flex\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"col-md-4\", \"mb-4\"], [1, \"card\", \"h-100\"], [1, \"card-title\"], [1, \"card-text\"], [\"class\", \"card-text\", 4, \"ngIf\"], [1, \"card-footer\"], [1, \"badge\"], [1, \"text-center\", \"py-5\"], [1, \"fas\", \"fa-book\", \"fa-3x\", \"text-muted\", \"mb-3\"], [1, \"text-muted\"]],\n        template: function BooksComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n            i0.ɵɵelement(3, \"i\", 2);\n            i0.ɵɵtext(4, \" Catalogue des Livres\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"input\", 6);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_Template_input_ngModelChange_8_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.searchTerm, $event) || (ctx.searchTerm = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"keyup.enter\", function BooksComponent_Template_input_keyup_enter_8_listener() {\n              return ctx.searchBooks();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function BooksComponent_Template_button_click_9_listener() {\n              return ctx.searchBooks();\n            });\n            i0.ɵɵelement(10, \"i\", 8);\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(11, \"div\", 9)(12, \"select\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function BooksComponent_Template_select_ngModelChange_12_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.selectedCategory, $event) || (ctx.selectedCategory = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function BooksComponent_Template_select_change_12_listener() {\n              return ctx.filterByCategory();\n            });\n            i0.ɵɵelementStart(13, \"option\", 11);\n            i0.ɵɵtext(14, \"Toutes les cat\\u00E9gories\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(15, BooksComponent_option_15_Template, 2, 2, \"option\", 12);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(16, \"div\", 13)(17, \"button\", 14);\n            i0.ɵɵlistener(\"click\", function BooksComponent_Template_button_click_17_listener() {\n              return ctx.showAddForm = true;\n            });\n            i0.ɵɵelement(18, \"i\", 15);\n            i0.ɵɵtext(19, \" Ajouter \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(20, BooksComponent_div_20_Template, 45, 7, \"div\", 16);\n            i0.ɵɵelementStart(21, \"div\", 0);\n            i0.ɵɵtemplate(22, BooksComponent_div_22_Template, 25, 10, \"div\", 17);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(23, BooksComponent_div_23_Template, 4, 0, \"div\", 18);\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.searchTerm);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedCategory);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.showAddForm);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.books);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.books.length === 0);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, FormsModule, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MinValidator, i3.NgModel, i3.NgForm],\n        styles: [\".card[_ngcontent-%COMP%]{transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}\"]\n      });\n    }\n  }\n  return BooksComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}