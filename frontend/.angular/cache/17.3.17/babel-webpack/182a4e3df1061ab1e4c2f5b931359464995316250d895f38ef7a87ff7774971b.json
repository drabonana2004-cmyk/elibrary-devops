{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet LoginComponent = class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.credentials = {\n      email: '',\n      password: ''\n    };\n    this.registerData = {\n      nom: '',\n      prenom: '',\n      date_naissance: '',\n      sexe: '',\n      email: '',\n      telephone: '',\n      etablissement: '',\n      profession: '',\n      profession_detail: '',\n      motivations: '',\n      password: '',\n      photo: null\n    };\n    this.loading = false;\n    this.error = '';\n    this.showRegister = false;\n  }\n  toggleForm() {\n    this.showRegister = !this.showRegister;\n    this.error = '';\n  }\n  onFileSelect(event) {\n    const file = event.target.files[0];\n    if (file) {\n      this.registerData.photo = file;\n    }\n  }\n  login() {\n    if (!this.credentials.email || !this.credentials.password) {\n      this.error = 'Veuillez remplir tous les champs';\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    this.authService.login(this.credentials.email, this.credentials.password).subscribe({\n      next: response => {\n        this.loading = false;\n        if (response.success && response.user) {\n          if (response.user.role === 'admin') {\n            this.router.navigate(['/admin']);\n          } else {\n            this.router.navigate(['/user']);\n          }\n        }\n      },\n      error: error => {\n        this.loading = false;\n        this.error = 'Identifiants incorrects';\n      }\n    });\n  }\n  onProfessionChange() {\n    this.registerData.profession_detail = '';\n  }\n  getProfessionLabel() {\n    const labels = {\n      'etudiant': 'Année de licence',\n      'eleve': 'Classe',\n      'entrepreneur': 'Domaine d\\'activité',\n      'autre': 'Précisez votre profession'\n    };\n    return labels[this.registerData.profession] || 'Détail';\n  }\n  getProfessionPlaceholder() {\n    const placeholders = {\n      'etudiant': 'Ex: L1, L2, L3, M1, M2...',\n      'eleve': 'Ex: 6ème, Terminale, BTS...',\n      'entrepreneur': 'Ex: Technologie, Commerce, Santé...',\n      'autre': 'Précisez votre profession'\n    };\n    return placeholders[this.registerData.profession] || '';\n  }\n  register() {\n    // Validation des motivations\n    if (this.registerData.motivations && this.registerData.motivations.length < 50) {\n      this.error = 'Les motivations doivent contenir au moins 50 caractères';\n      return;\n    }\n    if (!this.registerData.nom || !this.registerData.prenom || !this.registerData.email || !this.registerData.password || !this.registerData.date_naissance || !this.registerData.sexe || !this.registerData.telephone || !this.registerData.etablissement || !this.registerData.profession || !this.registerData.profession_detail || !this.registerData.motivations || !this.registerData.photo) {\n      this.error = 'Veuillez remplir tous les champs obligatoires';\n      return;\n    }\n    this.loading = true;\n    this.error = '';\n    // Créer FormData pour l'upload de fichier\n    const formData = new FormData();\n    formData.append('nom', this.registerData.nom);\n    formData.append('prenom', this.registerData.prenom);\n    formData.append('date_naissance', this.registerData.date_naissance);\n    formData.append('sexe', this.registerData.sexe);\n    formData.append('email', this.registerData.email);\n    formData.append('telephone', this.registerData.telephone);\n    formData.append('etablissement', this.registerData.etablissement);\n    formData.append('profession', this.registerData.profession);\n    formData.append('profession_detail', this.registerData.profession_detail);\n    formData.append('motivations', this.registerData.motivations);\n    formData.append('password', this.registerData.password);\n    if (this.registerData.photo) {\n      formData.append('photo', this.registerData.photo);\n    }\n    this.authService.registerComplete(formData).subscribe({\n      next: response => {\n        this.loading = false;\n        if (response.success) {\n          alert(`Compte créé avec succès !\\nMatricule: ${response.matricule}\\n\\nVotre compte est en attente de validation par l'administrateur.`);\n          // Connexion automatique\n          this.credentials.email = this.registerData.email;\n          this.credentials.password = this.registerData.password;\n          this.login();\n        }\n      },\n      error: error => {\n        this.loading = false;\n        this.error = 'Erreur lors de la création du compte';\n      }\n    });\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  template: `\n    <div class=\"login-page\">\n      <div class=\"login-background\"></div>\n      <div class=\"container-fluid h-100\">\n        <div class=\"row h-100\">\n          <!-- Left Panel -->\n          <div class=\"col-lg-6 d-none d-lg-flex align-items-center justify-content-center left-panel\">\n            <div class=\"text-center text-white\">\n              <div class=\"hero-logo mb-4\">\n                <div class=\"custom-logo-large\">\n                  <div class=\"wifi-signals-large\">\n                    <div class=\"wifi-1-large\"></div>\n                    <div class=\"wifi-2-large\"></div>\n                    <div class=\"wifi-3-large\"></div>\n                  </div>\n                  <div class=\"book-3d-large\">\n                    <div class=\"book-front-large\"></div>\n                    <div class=\"book-pages-large\"></div>\n                  </div>\n                </div>\n              </div>\n              <h1 class=\"display-4 fw-bold mb-3\">eLibrary</h1>\n              <p class=\"lead mb-4\">Votre bibliothèque intelligente connectée</p>\n              <div class=\"features\">\n                <div class=\"feature-item\">\n                  <i class=\"fas fa-wifi\"></i>\n                  <span>Technologie IoT</span>\n                </div>\n                <div class=\"feature-item\">\n                  <i class=\"fas fa-book-open\"></i>\n                  <span>Catalogue numérique</span>\n                </div>\n                <div class=\"feature-item\">\n                  <i class=\"fas fa-mobile-alt\"></i>\n                  <span>Accès mobile</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- Right Panel -->\n          <div class=\"col-lg-6 d-flex align-items-center justify-content-center right-panel\">\n            <div class=\"login-form-container\">\n              <div class=\"card professional-card\">\n                <div class=\"card-header text-center\">\n                  <div class=\"mobile-logo d-lg-none mb-3\">\n                    <div class=\"custom-logo\">\n                      <div class=\"wifi-signals\">\n                        <div class=\"wifi-1\"></div>\n                        <div class=\"wifi-2\"></div>\n                        <div class=\"wifi-3\"></div>\n                      </div>\n                      <div class=\"book-3d\">\n                        <div class=\"book-front\"></div>\n                        <div class=\"book-pages\"></div>\n                      </div>\n                    </div>\n                  </div>\n                  <h3 class=\"mb-2\">{{showRegister ? 'Création de compte' : 'Connexion'}}</h3>\n                  <p class=\"text-muted\">{{showRegister ? 'Rejoignez notre communauté' : 'Accédez à votre espace'}}</p>\n                </div>\n            <div class=\"card-body\">\n              <!-- Connexion -->\n              <form *ngIf=\"!showRegister\" (ngSubmit)=\"login()\">\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Email</label>\n                  <input type=\"email\" class=\"form-control\" [(ngModel)]=\"credentials.email\" \n                         name=\"email\" required>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Mot de passe</label>\n                  <input type=\"password\" class=\"form-control\" [(ngModel)]=\"credentials.password\" \n                         name=\"password\" required>\n                </div>\n                <div class=\"d-grid\">\n                  <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"loading\">\n                    <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm me-2\"></span>\n                    Se connecter\n                  </button>\n                </div>\n              </form>\n              \n              <!-- Inscription -->\n              <form *ngIf=\"showRegister\" (ngSubmit)=\"register()\">\n                <div class=\"row\">\n                  <div class=\"col-md-6\">\n                    <div class=\"mb-3\">\n                      <label class=\"form-label\">Nom *</label>\n                      <input type=\"text\" class=\"form-control\" [(ngModel)]=\"registerData.nom\" \n                             name=\"nom\" required>\n                    </div>\n                  </div>\n                  <div class=\"col-md-6\">\n                    <div class=\"mb-3\">\n                      <label class=\"form-label\">Prénom *</label>\n                      <input type=\"text\" class=\"form-control\" [(ngModel)]=\"registerData.prenom\" \n                             name=\"prenom\" required>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-md-6\">\n                    <div class=\"mb-3\">\n                      <label class=\"form-label\">Date de naissance *</label>\n                      <input type=\"date\" class=\"form-control\" [(ngModel)]=\"registerData.date_naissance\" \n                             name=\"date_naissance\" required>\n                    </div>\n                  </div>\n                  <div class=\"col-md-6\">\n                    <div class=\"mb-3\">\n                      <label class=\"form-label\">Sexe *</label>\n                      <select class=\"form-select\" [(ngModel)]=\"registerData.sexe\" name=\"sexe\" required>\n                        <option value=\"\">Sélectionner...</option>\n                        <option value=\"M\">Masculin</option>\n                        <option value=\"F\">Féminin</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Photo d'identité *</label>\n                  <input type=\"file\" class=\"form-control\" (change)=\"onFileSelect($event)\" \n                         accept=\"image/*\" required>\n                  <small class=\"text-muted\">Format photo d'identité (JPG, PNG)</small>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Email *</label>\n                  <input type=\"email\" class=\"form-control\" [(ngModel)]=\"registerData.email\" \n                         name=\"email\" required>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Numéro de téléphone *</label>\n                  <input type=\"tel\" class=\"form-control\" [(ngModel)]=\"registerData.telephone\" \n                         name=\"telephone\" required>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Établissement d'origine *</label>\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"registerData.etablissement\" \n                         name=\"etablissement\" placeholder=\"Université, École, Entreprise...\" required>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Profession *</label>\n                  <select class=\"form-select\" [(ngModel)]=\"registerData.profession\" name=\"profession\" (change)=\"onProfessionChange()\" required>\n                    <option value=\"\">Sélectionner...</option>\n                    <option value=\"etudiant\">Étudiant</option>\n                    <option value=\"eleve\">Élève</option>\n                    <option value=\"entrepreneur\">Entrepreneur</option>\n                    <option value=\"autre\">Autre</option>\n                  </select>\n                </div>\n                <div class=\"mb-3\" *ngIf=\"registerData.profession\">\n                  <label class=\"form-label\">{{getProfessionLabel()}} *</label>\n                  <input type=\"text\" class=\"form-control\" [(ngModel)]=\"registerData.profession_detail\" \n                         name=\"profession_detail\" [placeholder]=\"getProfessionPlaceholder()\" required>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Motivations *</label>\n                  <textarea class=\"form-control\" [(ngModel)]=\"registerData.motivations\" \n                            name=\"motivations\" rows=\"3\" \n                            placeholder=\"Pourquoi êtes-vous intéressé(e) par cette application ? Quels sont vos objectifs ?\" \n                            required></textarea>\n                  <small class=\"text-muted\">Décrivez vos motivations et objectifs (minimum 50 caractères)</small>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">Mot de passe *</label>\n                  <input type=\"password\" class=\"form-control\" [(ngModel)]=\"registerData.password\" \n                         name=\"password\" required minlength=\"6\">\n                </div>\n                <div class=\"d-grid\">\n                  <button type=\"submit\" class=\"btn btn-success\" [disabled]=\"loading\">\n                    <span *ngIf=\"loading\" class=\"spinner-border spinner-border-sm me-2\"></span>\n                    Créer le compte\n                  </button>\n                </div>\n              </form>\n              \n              <div *ngIf=\"error\" class=\"alert alert-danger mt-3\">\n                {{error}}\n              </div>\n              \n                <div class=\"card-footer text-center\">\n                  <p class=\"mb-2\">{{showRegister ? 'Déjà inscrit ?' : 'Pas encore de compte ?'}}</p>\n                  <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"toggleForm()\">\n                    {{showRegister ? 'Se connecter' : 'Créer un compte'}}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n              \n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .login-page {\n      min-height: 100vh;\n      position: relative;\n    }\n    .login-background {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n      z-index: -1;\n    }\n    .left-panel {\n      background: linear-gradient(135deg, #1B365D 0%, #2E8B8B 100%);\n      position: relative;\n    }\n    .left-panel::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><circle cx=\"20\" cy=\"20\" r=\"2\" fill=\"rgba(255,255,255,0.1)\"/><circle cx=\"80\" cy=\"40\" r=\"1\" fill=\"rgba(255,255,255,0.1)\"/><circle cx=\"40\" cy=\"80\" r=\"1.5\" fill=\"rgba(255,255,255,0.1)\"/></svg>');\n    }\n    .right-panel {\n      background: rgba(255,255,255,0.95);\n      backdrop-filter: blur(10px);\n    }\n    .professional-card {\n      border: none;\n      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);\n      border-radius: 20px;\n      overflow: hidden;\n      width: 100%;\n      max-width: 500px;\n    }\n    .card-header {\n      background: white;\n      border-bottom: 1px solid #f0f0f0;\n      padding: 2rem;\n    }\n    .login-form-container {\n      width: 100%;\n      max-width: 500px;\n      padding: 2rem;\n    }\n    .features {\n      display: flex;\n      justify-content: center;\n      gap: 2rem;\n      margin-top: 2rem;\n    }\n    .feature-item {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      gap: 0.5rem;\n    }\n    .feature-item i {\n      font-size: 2rem;\n      opacity: 0.9;\n    }\n    .feature-item span {\n      font-size: 0.9rem;\n      opacity: 0.8;\n    }\n    .custom-logo-large {\n      width: 150px;\n      height: 150px;\n      position: relative;\n      margin: 0 auto;\n    }\n    .wifi-signals-large {\n      position: absolute;\n      top: 0;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n    .wifi-1-large, .wifi-2-large, .wifi-3-large {\n      background: rgba(255,255,255,0.9);\n      border-radius: 25px 25px 0 0;\n      margin: 3px auto;\n    }\n    .wifi-1-large { width: 50px; height: 12px; }\n    .wifi-2-large { width: 35px; height: 10px; }\n    .wifi-3-large { width: 20px; height: 8px; }\n    .book-3d-large {\n      position: absolute;\n      top: 40px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 90px;\n      height: 90px;\n    }\n    .book-front-large {\n      width: 90px;\n      height: 90px;\n      background: rgba(255,255,255,0.95);\n      border-radius: 12px;\n      position: relative;\n      box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n    }\n    .book-pages-large {\n      position: absolute;\n      top: 12px;\n      left: 12px;\n      width: 66px;\n      height: 66px;\n      background: #1B365D;\n      border-radius: 6px;\n    }\n    .book-pages-large::after {\n      content: '';\n      position: absolute;\n      top: 12px;\n      left: 12px;\n      right: 12px;\n      height: 3px;\n      background: rgba(255,255,255,0.8);\n      box-shadow: 0 8px 0 rgba(255,255,255,0.8), 0 16px 0 rgba(255,255,255,0.8);\n    }\n    .form-control, .form-select {\n      border-radius: 12px;\n      border: 2px solid #e9ecef;\n      padding: 15px;\n      font-size: 16px;\n      transition: all 0.3s ease;\n    }\n    .form-control:focus, .form-select:focus {\n      border-color: #667eea;\n      box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);\n      transform: translateY(-2px);\n    }\n    .btn {\n      border-radius: 12px;\n      padding: 15px;\n      font-weight: 600;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n    .fade-in {\n      animation: fadeInUp 0.8s ease-out;\n    }\n    @keyframes fadeInUp {\n      from {\n        opacity: 0;\n        transform: translateY(30px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n    .logo-container {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .custom-logo {\n      width: 100px;\n      height: 100px;\n      position: relative;\n      margin: 0 auto;\n    }\n    .wifi-signals {\n      position: absolute;\n      top: 0;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n    .wifi-1, .wifi-2, .wifi-3 {\n      width: 30px;\n      height: 8px;\n      background: #2E8B8B;\n      border-radius: 15px 15px 0 0;\n      margin: 2px auto;\n    }\n    .wifi-2 { width: 20px; }\n    .wifi-3 { width: 10px; }\n    .book-3d {\n      position: absolute;\n      top: 25px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 60px;\n      height: 60px;\n    }\n    .book-front {\n      width: 60px;\n      height: 60px;\n      background: #1B365D;\n      border-radius: 8px;\n      position: relative;\n    }\n    .book-pages {\n      position: absolute;\n      top: 8px;\n      left: 8px;\n      width: 44px;\n      height: 44px;\n      background: white;\n      border-radius: 4px;\n    }\n    .book-pages::after {\n      content: '';\n      position: absolute;\n      top: 8px;\n      left: 8px;\n      right: 8px;\n      height: 2px;\n      background: #1B365D;\n      box-shadow: 0 6px 0 #1B365D, 0 12px 0 #1B365D;\n    }\n  `]\n})], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}